{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ghulam/projects/ifgcrm/app/api/pipelines/%5Bid%5D/stages/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport async function GET(request: Request, { params }: { params: Promise<{ id: string }> }) {\n  const { id } = await params\n\n  // Mock pipeline data with stages and deals\n  const mockData = {\n    1: {\n      id: 1,\n      name: \"US College Recruitment\",\n      dealsWon: 8, // Added metric\n      conversionRate: 53.3, // Added metric (8 won / 15 total * 100)\n      stages: [\n        {\n          id: 1,\n          name: \"Initial Lead\",\n          order: 1,\n          deals: [\n            {\n              id: 9001,\n              player_name: \"Maribel Santos\",\n              email: \"maribel.santos@email.com\",\n              phone: \"+1 (555) 123-4567\",\n              programme: \"US College 2026\",\n              recruiter: \"Chris\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-06T10:00:00Z\",\n              deal_value: 15000,\n            },\n            {\n              id: 9002,\n              player_name: \"James Wilson\",\n              email: \"james.wilson@email.com\",\n              phone: \"+1 (555) 234-5678\",\n              programme: \"US College 2026\",\n              recruiter: \"Sarah\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-07T14:30:00Z\",\n              deal_value: 18000,\n            },\n            {\n              id: 9003,\n              player_name: \"Emma Rodriguez\",\n              email: \"emma.rodriguez@email.com\",\n              phone: \"+1 (555) 345-6789\",\n              programme: \"US College 2026\",\n              recruiter: \"Chris\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-05T09:15:00Z\",\n              deal_value: 12000,\n            },\n          ],\n        },\n        {\n          id: 2,\n          name: \"In Contact\",\n          order: 2,\n          deals: [\n            {\n              id: 9020,\n              player_name: \"David Lee\",\n              email: \"david.lee@email.com\",\n              phone: \"+1 (555) 111-2222\",\n              programme: \"US College 2027\",\n              recruiter: \"Mike\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-08T09:00:00Z\",\n              deal_value: 14000,\n            },\n            {\n              id: 9021,\n              player_name: \"Sophie Turner\",\n              email: \"sophie.turner@email.com\",\n              phone: \"+1 (555) 222-3333\",\n              programme: \"US College 2026\",\n              recruiter: \"Emma\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-07T15:30:00Z\",\n              deal_value: 16000,\n            },\n          ],\n        },\n        {\n          id: 3,\n          name: \"Zoom Scheduled\",\n          order: 3,\n          deals: [\n            {\n              id: 9004,\n              player_name: \"Lucas Brown\",\n              email: \"lucas.brown@email.com\",\n              phone: \"+1 (555) 456-7890\",\n              programme: \"US College 2026\",\n              recruiter: \"Mike\",\n              status: \"Interview\",\n              last_activity: \"2025-11-08T11:00:00Z\",\n              deal_value: 20000,\n            },\n            {\n              id: 9005,\n              player_name: \"Sophia Chen\",\n              email: \"sophia.chen@email.com\",\n              phone: \"+1 (555) 567-8901\",\n              programme: \"US College 2026\",\n              recruiter: \"Emma\",\n              status: \"Interview\",\n              last_activity: \"2025-11-07T16:45:00Z\",\n              deal_value: 22000,\n            },\n          ],\n        },\n        {\n          id: 4,\n          name: \"Reschedule Zoom\",\n          order: 4,\n          deals: [\n            {\n              id: 9022,\n              player_name: \"Ryan Cooper\",\n              email: \"ryan.cooper@email.com\",\n              phone: \"+1 (555) 333-4444\",\n              programme: \"US College 2026\",\n              recruiter: \"Sarah\",\n              status: \"Interview\",\n              last_activity: \"2025-11-06T10:30:00Z\",\n              deal_value: 19000,\n            },\n          ],\n        },\n        {\n          id: 5,\n          name: \"Follow Up\",\n          order: 5,\n          deals: [\n            {\n              id: 9023,\n              player_name: \"Emily Watson\",\n              email: \"emily.watson@email.com\",\n              phone: \"+1 (555) 444-5555\",\n              programme: \"US College 2027\",\n              recruiter: \"Chris\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-05T14:00:00Z\",\n              deal_value: 17000,\n            },\n            {\n              id: 9024,\n              player_name: \"Michael Zhang\",\n              email: \"michael.zhang@email.com\",\n              phone: \"+1 (555) 555-6666\",\n              programme: \"US College 2026\",\n              recruiter: \"Mike\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-04T11:30:00Z\",\n              deal_value: 18000,\n            },\n          ],\n        },\n        {\n          id: 6,\n          name: \"Collecting Documents\",\n          order: 6,\n          deals: [\n            {\n              id: 9006,\n              player_name: \"Oliver Taylor\",\n              email: \"oliver.taylor@email.com\",\n              phone: \"+1 (555) 678-9012\",\n              programme: \"US College 2026\",\n              recruiter: \"Chris\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-06T13:20:00Z\",\n              deal_value: 16000,\n            },\n          ],\n        },\n        {\n          id: 7,\n          name: \"Applied\",\n          order: 7,\n          deals: [\n            {\n              id: 9007,\n              player_name: \"Ava Martinez\",\n              email: \"ava.martinez@email.com\",\n              phone: \"+1 (555) 789-0123\",\n              programme: \"US College 2026\",\n              recruiter: \"Sarah\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-05T10:30:00Z\",\n              deal_value: 17000,\n            },\n            {\n              id: 9008,\n              player_name: \"Noah Anderson\",\n              email: \"noah.anderson@email.com\",\n              phone: \"+1 (555) 890-1234\",\n              programme: \"US College 2026\",\n              recruiter: \"Mike\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-04T15:00:00Z\",\n              deal_value: 19000,\n            },\n          ],\n        },\n        {\n          id: 8,\n          name: \"Conditional Offer\",\n          order: 8,\n          deals: [\n            {\n              id: 9025,\n              player_name: \"Hannah Mitchell\",\n              email: \"hannah.mitchell@email.com\",\n              phone: \"+1 (555) 666-7777\",\n              programme: \"US College 2026\",\n              recruiter: \"Emma\",\n              status: \"Signed\",\n              last_activity: \"2025-11-03T16:00:00Z\",\n              deal_value: 23000,\n            },\n          ],\n        },\n        {\n          id: 9,\n          name: \"Dormant Lead\",\n          order: 9,\n          deals: [\n            {\n              id: 9026,\n              player_name: \"Alex Roberts\",\n              email: \"alex.roberts@email.com\",\n              phone: \"+1 (555) 777-8888\",\n              programme: \"US College 2027\",\n              recruiter: \"Chris\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-10-28T10:00:00Z\",\n              deal_value: 0,\n            },\n          ],\n        },\n      ],\n    },\n    2: {\n      id: 2,\n      name: \"European Pathway\",\n      dealsWon: 2,\n      conversionRate: 50.0,\n      stages: [\n        {\n          id: 11,\n          name: \"Initial contact\",\n          order: 1,\n          deals: [\n            {\n              id: 9010,\n              player_name: \"Jack Williams\",\n              email: \"jack.williams@email.com\",\n              phone: \"+1 (555) 012-3456\",\n              programme: \"European Academy\",\n              recruiter: \"Chris\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-07T09:00:00Z\",\n              deal_value: 13000,\n            },\n          ],\n        },\n        {\n          id: 12,\n          name: \"Trial scheduled\",\n          order: 2,\n          deals: [],\n        },\n        {\n          id: 13,\n          name: \"Trial completed\",\n          order: 3,\n          deals: [\n            {\n              id: 9011,\n              player_name: \"Mia Davies\",\n              email: \"mia.davies@email.com\",\n              phone: \"+1 (555) 112-3456\",\n              programme: \"European Academy\",\n              recruiter: \"Sarah\",\n              status: \"Contacted\",\n              last_activity: \"2025-11-06T14:00:00Z\",\n              deal_value: 14000,\n            },\n          ],\n        },\n        {\n          id: 14,\n          name: \"Offered\",\n          order: 4,\n          deals: [],\n        },\n      ],\n    },\n    3: {\n      id: 3,\n      name: \"UK Academy Pipeline\",\n      dealsWon: 1,\n      conversionRate: 33.3,\n      stages: [\n        {\n          id: 21,\n          name: \"Inquiry\",\n          order: 1,\n          deals: [\n            {\n              id: 9012,\n              player_name: \"Ethan Johnson\",\n              email: \"ethan.johnson@email.com\",\n              phone: \"+1 (555) 212-3456\",\n              programme: \"UK Programme\",\n              recruiter: \"Mike\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-08T10:00:00Z\",\n              deal_value: 11000,\n            },\n          ],\n        },\n        {\n          id: 22,\n          name: \"Information sent\",\n          order: 2,\n          deals: [\n            {\n              id: 9013,\n              player_name: \"Charlotte Smith\",\n              email: \"charlotte.smith@email.com\",\n              phone: \"+1 (555) 312-3456\",\n              programme: \"UK Programme\",\n              recruiter: \"Emma\",\n              status: \"In Pipeline\",\n              last_activity: \"2025-11-07T11:30:00Z\",\n              deal_value: 10000,\n            },\n          ],\n        },\n        {\n          id: 23,\n          name: \"Enrolled\",\n          order: 3,\n          deals: [],\n        },\n      ],\n    },\n  }\n\n  const pipelineData = mockData[Number.parseInt(id) as keyof typeof mockData]\n\n  if (!pipelineData) {\n    return NextResponse.json({ error: \"Pipeline not found\" }, { status: 404 })\n  }\n\n  const url = new URL(request.url)\n  const stagesOnly = url.searchParams.get(\"stagesOnly\") === \"true\"\n\n  if (stagesOnly) {\n    // Return only stages without deals for Settings page\n    const stages = pipelineData.stages.map(({ deals, ...stage }) => stage)\n    return NextResponse.json(stages)\n  }\n\n  return NextResponse.json(pipelineData)\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}