{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts","turbopack:///[project]/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts","turbopack:///[project]/lib/supabase/admin.ts","turbopack:///[project]/app/setup-admin/actions.ts","turbopack:///[project]/.next-internal/server/app/setup-admin/page/actions.js (server actions loader)"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n","// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n","import { createClient } from \"@supabase/supabase-js\"\n\nexport function createAdminClient() {\n  const supabaseUrl =\n    process.env.NEXT_PUBLIC_SUPABASE_URL || process.env.SUPABASE_URL || \"https://cujprjusexjzuapydiuf.supabase.co\"\n  const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"\"\n\n  return createClient(supabaseUrl, supabaseServiceKey, {\n    auth: {\n      autoRefreshToken: false,\n      persistSession: false,\n    },\n    global: {\n      fetch: fetch.bind(globalThis),\n    },\n  })\n}\n","\"use server\"\n\nimport { createAdminClient } from \"@/lib/supabase/admin\"\nimport { redirect } from \"next/navigation\"\n\nexport async function setupAdmin(formData: FormData) {\n  const email = formData.get(\"email\") as string\n  const password = formData.get(\"password\") as string\n\n  if (!email || !password) {\n    return { error: \"Email and password are required\" }\n  }\n\n  const adminClient = createAdminClient()\n\n  // Create user with admin client (bypasses email verification)\n  const { data: authData, error: authError } = await adminClient.auth.admin.createUser({\n    email,\n    password,\n    email_confirm: true, // Auto-confirm email\n    user_metadata: {\n      full_name: \"Super Admin\",\n    },\n  })\n\n  if (authError) {\n    return { error: authError.message }\n  }\n\n  // Create profile with admin role\n  const { error: profileError } = await adminClient.from(\"profiles\").insert({\n    id: authData.user.id,\n    email: authData.user.email,\n    full_name: \"Super Admin\",\n    role: \"admin\",\n  })\n\n  if (profileError) {\n    return { error: profileError.message }\n  }\n\n  redirect(\"/auth/login?setup=success\")\n}\n","export {setupAdmin as '40b822acf32490df49741317eb783bc7657870f2fd'} from 'ACTIONS_MODULE0'\n"],"names":["registerServerReference","ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"6CAAoD,OAAA,cAAA,CAAA,EAAA,aAAA,oCAC3CA,0BAAAA,qCAAAA,EAAAA,uBAAuB,YAAQ,CAAA,CAAA,IAAA,iCCEjC,SAASC,EAAyBC,CAAc,EACrD,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAQE,MAAM,CAAED,IAAK,CACvC,IAAME,EAASH,CAAO,CAACC,EAAE,CACzB,GAAsB,YAAlB,AAA8B,OAAvBE,EACT,MAAM,OAAA,cAEL,CAFK,AAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,EAAO;AAAA,oEAAuE,CAAC,EADhJ,oBAAA,OAAA,mBAAA,gBAAA,CAEN,EAEJ,CACF,0EATgBJ,2BAAAA,qCAAAA,8CCHhB,EAAA,EAAA,CAAA,CAAA,OCGA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,EAAW,CAAkB,EACjD,MDDM,ECCA,EAAQ,EAAS,GAAG,CAAC,SACrB,EAAW,EAAS,GAAG,CAAC,YAE9B,GAAI,CAAC,GAAS,CAAC,EACb,MAAO,CAAE,CADc,KACP,iCAAkC,EAGpD,IAAM,GDVA,EACJ,QAAQ,CCSU,EDTP,CAAC,wBAAwB,EAAI,QAAQ,GAAG,CAAC,YAAY,EAAI,6CAC3C,QAAQ,GAAG,CAAC,yBAAyB,EAAI,GAE7D,CAAA,EAAA,EAAA,YAAY,AAAZ,EAAa,EAAa,EAAoB,CACnD,KAAM,CACJ,iBAAkB,GAClB,gBAAgB,CAClB,EACA,OAAQ,CACN,MAAO,MAAM,IAAI,CAAC,WACpB,CACF,ICCM,CAAE,KAAM,CAAQ,CAAE,MAAO,CAAS,CAAE,CAAG,MAAM,EAAY,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,OACnF,WACA,EACA,eAAe,EACf,cAAe,CACb,UAAW,aACb,CACF,GAEA,GAAI,EACF,MAAO,CAAE,EADI,IACG,EAAU,OAAO,AAAC,EAIpC,GAAM,CAAE,MAAO,CAAY,CAAE,CAAG,MAAM,EAAY,IAAI,CAAC,YAAY,MAAM,CAAC,CACxE,GAAI,EAAS,IAAI,CAAC,EAAE,CACpB,MAAO,EAAS,IAAI,CAAC,KAAK,CAC1B,UAAW,cACX,KAAM,OACR,GAEA,GAAI,EACF,MAAO,CAAE,KADO,CACA,EAAa,OAAO,AAAC,EAGvC,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,4BACX,0CArCsB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,6DCLtB,IAAA,EAAA,EAAA,CAAA,CAAA","ignoreList":[0,1]}