module.exports=[98250,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(40695),e=a.i(54161),f=a.i(87682),g=a.i(92258),h=a.i(41710),i=a.i(92e3),j=a.i(77156),k=a.i(24669),l=a.i(65733),m=a.i(67453),n=a.i(62722);function o({run:a,open:c,onClose:d}){let f,i=()=>(a.successCount/a.totalRecipients*100).toFixed(1),j=a=>new Date(a).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),o=100===(f=parseFloat(i()))?{text:"All succeeded",class:"bg-green-100 text-green-700 border-green-200"}:a.failedCount===a.totalRecipients?{text:"All failed",class:"bg-red-100 text-red-700 border-red-200"}:f>=95?{text:"Mostly succeeded",class:"bg-green-100 text-green-700 border-green-200"}:{text:"Partial success",class:"bg-amber-100 text-amber-700 border-amber-200"};return(0,b.jsx)(l.Dialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(l.DialogContent,{className:"max-w-3xl max-h-[90vh] my-4 overflow-hidden p-0 flex flex-col",children:[(0,b.jsx)(l.DialogHeader,{className:"border-b pb-4 mb-5",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("div",{className:"w-11 h-11 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(g.Mail,{className:"h-5 w-5 text-white"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(l.DialogTitle,{className:"text-lg font-bold text-gray-900 mb-1",children:a.workflowName}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Batch run • ",a.totalRecipients.toLocaleString()," contacts"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2 ml-4",children:[(0,b.jsx)(e.Badge,{variant:"outline",className:`text-xs ${o.class}`,children:o.text}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:j(a.startedAt)})]})]})}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Batch Summary"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 px-4 py-4 rounded-b-lg border border-gray-200 bg-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Trigger"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.trigger})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Total Recipients"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.totalRecipients.toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Started at"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:j(a.startedAt)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Completed at"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.completedAt?j(a.completedAt):"Still running"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Duration"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.duration})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Success Rate"}),(0,b.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[i(),"%"]})]})]})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Delivery Statistics"})}),(0,b.jsxs)("div",{className:"rounded-b-lg border border-gray-200 bg-white divide-y divide-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:(0,b.jsx)(m.CheckCircle2,{className:"h-4 w-4 text-green-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Succeeded"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-base font-bold text-gray-900",children:a.successCount.toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[(a.successCount/a.totalRecipients*100).toFixed(1),"%"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:(0,b.jsx)(n.XCircle,{className:"h-4 w-4 text-red-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Failed"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-base font-bold text-gray-900",children:a.failedCount.toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[(a.failedCount/a.totalRecipients*100).toFixed(1),"%"]})]})]}),a.skippedCount>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:(0,b.jsx)(h.Clock,{className:"h-4 w-4 text-gray-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Skipped"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-base font-bold text-gray-900",children:a.skippedCount.toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[(a.skippedCount/a.totalRecipients*100).toFixed(1),"%"]})]})]})]})]}),null!==a.avgOpenRate&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Engagement Metrics"})}),(0,b.jsxs)("div",{className:"rounded-b-lg border border-gray-200 bg-white divide-y divide-gray-100",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4 text-blue-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Average Open Rate"})]}),(0,b.jsxs)("div",{className:"text-base font-bold text-gray-900",children:[a.avgOpenRate,"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:(0,b.jsx)(k.TrendingUp,{className:"h-4 w-4 text-green-600"})}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Average Click Rate"})]}),(0,b.jsxs)("div",{className:"text-base font-bold text-gray-900",children:[a.avgClickRate,"%"]})]})]})]})]})})}let p=[{id:"1",workflowId:1,workflowName:"New Lead Follow-Up",workflowIcon:"mail",workflowDescription:"3-step email sequence over 7 days.",totalRecipients:1247,successCount:1198,failedCount:49,skippedCount:0,trigger:"New player added",startedAt:"2025-01-18T10:30:00Z",completedAt:"2025-01-18T10:35:23Z",duration:"5m 23s",avgOpenRate:68.4,avgClickRate:24.7},{id:"2",workflowId:2,workflowName:"Signed Player Welcome",workflowIcon:"user-check",workflowDescription:"Welcome sequence for new signees.",totalRecipients:89,successCount:87,failedCount:2,skippedCount:0,trigger:"Player status changed to Signed",startedAt:"2025-01-18T08:15:00Z",completedAt:"2025-01-18T08:16:45Z",duration:"1m 45s",avgOpenRate:82.3,avgClickRate:31.2},{id:"3",workflowId:3,workflowName:"Invoice Reminder",workflowIcon:"receipt",workflowDescription:"Reminds parents of overdue invoices.",totalRecipients:342,successCount:0,failedCount:342,skippedCount:0,trigger:"Invoice overdue by 7 days",startedAt:"2025-01-17T14:00:00Z",completedAt:"2025-01-17T14:02:15Z",duration:"2m 15s",avgOpenRate:null,avgClickRate:null},{id:"4",workflowId:1,workflowName:"New Lead Follow-Up",workflowIcon:"mail",workflowDescription:"3-step email sequence over 7 days.",totalRecipients:892,successCount:892,failedCount:0,skippedCount:0,trigger:"New player added",startedAt:"2025-01-16T11:00:00Z",completedAt:"2025-01-16T11:04:12Z",duration:"4m 12s",avgOpenRate:71.2,avgClickRate:28.1}];function q({user:a}){let[l,m]=(0,c.useState)([]),[n,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)("all"),[z,A]=(0,c.useState)("all"),[B,C]=(0,c.useState)("30");(0,c.useEffect)(()=>{D()},[x,z,B]);let D=async()=>{try{q(!0),s(!1),await new Promise(a=>setTimeout(a,800));let a=[...p];"all"!==x&&(a=a.filter(a=>a.workflowId.toString()===x)),"all"!==z&&("succeeded"===z?a=a.filter(a=>a.successCount>0&&0===a.failedCount):"failed"===z&&(a=a.filter(a=>a.failedCount>0))),m(a)}catch(a){s(!0)}finally{q(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mb-5 flex items-start justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Select,{value:x,onValueChange:y,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"All workflows"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All workflows"}),(0,b.jsx)(f.SelectItem,{value:"1",children:"New Lead Follow-Up"}),(0,b.jsx)(f.SelectItem,{value:"2",children:"Signed Player Welcome"}),(0,b.jsx)(f.SelectItem,{value:"3",children:"Invoice Reminder"})]})]}),(0,b.jsxs)(f.Select,{value:z,onValueChange:A,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"All statuses"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"All statuses"}),(0,b.jsx)(f.SelectItem,{value:"succeeded",children:"Succeeded"}),(0,b.jsx)(f.SelectItem,{value:"failed",children:"Failed"})]})]}),(0,b.jsxs)(f.Select,{value:B,onValueChange:C,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[160px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Date range"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"7",children:"Last 7 days"}),(0,b.jsx)(f.SelectItem,{value:"30",children:"Last 30 days"}),(0,b.jsx)(f.SelectItem,{value:"90",children:"Last 90 days"})]})]})]})}),r&&(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between rounded-lg border border-red-200 bg-red-50 px-4 py-3 border-l-4 border-l-red-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,b.jsx)("p",{className:"text-sm text-red-800",children:"We couldn't load run history. Please try again."})]}),(0,b.jsx)(d.Button,{variant:"link",size:"sm",onClick:()=>{D()},className:"text-red-600 hover:text-red-700 h-auto p-0",children:"Retry"})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3 bg-gray-50 border-b border-gray-200 text-xs font-semibold text-gray-700 uppercase tracking-wide",children:[(0,b.jsx)("div",{children:"Workflow"}),(0,b.jsx)("div",{children:"Recipients"}),(0,b.jsx)("div",{children:"Status"}),(0,b.jsx)("div",{children:"Started"}),(0,b.jsx)("div",{children:"Duration"}),(0,b.jsx)("div",{children:"Engagement"}),(0,b.jsx)("div",{className:"text-center",children:"Action"})]}),n?(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:[1,2,3,4,5].map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 w-40 bg-[#E5E7EB] animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-3 w-56 bg-[#E5E7EB] animate-pulse rounded"})]}),(0,b.jsx)("div",{className:"h-4 w-32 bg-[#E5E7EB] animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-6 w-28 bg-[#E5E7EB] animate-pulse rounded-full"}),(0,b.jsx)("div",{className:"h-4 w-20 bg-[#E5E7EB] animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 w-16 bg-[#E5E7EB] animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-4 w-20 bg-[#E5E7EB] animate-pulse rounded"}),(0,b.jsx)("div",{className:"h-8 w-8 bg-[#E5E7EB] animate-pulse rounded mx-auto"})]},a))}):0===l.length?(0,b.jsxs)("div",{className:"py-16 flex flex-col items-center justify-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-gray-100 p-4 mb-3",children:(0,b.jsx)(h.Clock,{className:"h-8 w-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No runs to show yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 max-w-md text-center",children:"Once your automations start sending messages, you'll see each batch run listed here."})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:l.map(a=>{let c=(a=>{let b=parseFloat((a.successCount/a.totalRecipients*100).toFixed(1));return 100===b?{text:"All succeeded",class:"bg-green-100 text-green-700 border-green-200"}:a.failedCount===a.totalRecipients?{text:"All failed",class:"bg-red-100 text-red-700 border-red-200"}:b>=95?{text:"Mostly succeeded",class:"bg-green-100 text-green-700 border-green-200"}:{text:"Partial success",class:"bg-amber-100 text-amber-700 border-amber-200"}})(a);return(0,b.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3 hover:bg-gray-50 transition-colors items-center",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex-shrink-0",children:(0,b.jsx)(g.Mail,{className:"h-4 w-4 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-gray-900 leading-snug",children:a.workflowName}),(0,b.jsx)("div",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:a.workflowDescription})]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-base font-bold text-gray-900",children:a.totalRecipients.toLocaleString()}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[(0,b.jsx)("span",{className:"text-green-600 font-medium",children:a.successCount.toLocaleString()}),a.failedCount>0&&(0,b.jsxs)(b.Fragment,{children:[" • ",(0,b.jsxs)("span",{className:"text-red-600 font-medium",children:[a.failedCount.toLocaleString()," failed"]})]})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(e.Badge,{variant:"outline",className:`text-xs ${c.class}`,children:c.text})}),(0,b.jsx)("div",{className:"text-sm text-gray-700",children:new Date(a.startedAt).toLocaleString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.duration}),(0,b.jsx)("div",{children:null!==a.avgOpenRate?(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[(0,b.jsx)(k.TrendingUp,{className:"h-3 w-3 text-blue-600"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.avgOpenRate,"%"]}),(0,b.jsx)("span",{className:"text-gray-500",children:"opens"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[(0,b.jsx)(k.TrendingUp,{className:"h-3 w-3 text-green-600"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.avgClickRate,"%"]}),(0,b.jsx)("span",{className:"text-gray-500",children:"clicks"})]})]}):(0,b.jsx)("div",{className:"text-xs text-gray-400",children:"No data"})}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50",onClick:()=>{u(a),w(!0)},children:(0,b.jsx)(j.Eye,{className:"h-4 w-4 text-gray-400"})})})]},a.id)})})]}),t&&(0,b.jsx)(o,{run:t,open:v,onClose:()=>w(!1)})]})}a.s(["RunHistoryContent",()=>q],98250)}];

//# sourceMappingURL=components_automations_run-history-content_tsx_5ade8156._.js.map