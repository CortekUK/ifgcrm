module.exports=[24575,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(3130),f=a.i(5522),g=a.i(40695),h=a.i(87682),i=a.i(88237),j=a.i(25827),k=a.i(54161),l=a.i(46143),m=a.i(13749),n=a.i(50522),o=a.i(69769),p=a.i(65733),q=a.i(17171),r=a.i(15618);function s({open:a,onClose:d,onSubmit:e,action:i,lists:j}){let[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,s]=(0,c.useState)(!1),t=async()=>{if(o&&m){let a=await fetch("/api/lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,type:"static"})});e((await a.json()).id.toString())}else k&&e(k);l(""),n(""),s(!1),d()};return(0,b.jsx)(p.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(p.DialogContent,{className:"sm:max-w-[440px]",children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsx)(p.DialogTitle,{children:"add"===i?"Add to List":"Remove from List"})}),(0,b.jsx)("div",{className:"space-y-4 py-4",children:o?(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"New list name"}),(0,b.jsx)(f.Input,{value:m,onChange:a=>n(a.target.value),placeholder:"Enter list name",className:"mt-2"}),(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>s(!1),className:"mt-2 text-sm",children:"Choose existing list instead"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{children:"Select list"}),(0,b.jsxs)(h.Select,{value:k,onValueChange:l,children:[(0,b.jsx)(h.SelectTrigger,{className:"mt-2",children:(0,b.jsx)(h.SelectValue,{placeholder:"Choose a list"})}),(0,b.jsx)(h.SelectContent,{children:j.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]})]}),"add"===i&&(0,b.jsxs)(g.Button,{variant:"outline",onClick:()=>s(!0),className:"w-full gap-2",children:[(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),"Create new list"]})]})}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:d,children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:t,disabled:!k&&!m,className:"bg-gradient-to-r from-blue-600 to-blue-700",children:"add"===i?"Add to list":"Remove from list"})]})]})})}var t=a.i(70106);let u=(0,t.default)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]),v=(0,t.default)("ListMinus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var w=a.i(84505),x=a.i(33508);function y({selectedCount:a,onAddToList:c,onRemoveFromList:d,onExportSelected:f,onClearSelection:h}){return 0===a?null:(0,b.jsx)(e.Card,{className:"mb-4 bg-blue-50/50 border-blue-200/60 px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[a," contact",1!==a?"s":""," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:c,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,b.jsx)(u,{className:"h-3.5 w-3.5"}),"Add to list"]}),(0,b.jsxs)(g.Button,{onClick:d,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,b.jsx)(v,{className:"h-3.5 w-3.5"}),"Remove from list"]}),(0,b.jsxs)(g.Button,{onClick:f,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,b.jsx)(w.Download,{className:"h-3.5 w-3.5"}),"Export"]})]})]}),(0,b.jsxs)(g.Button,{onClick:h,variant:"ghost",size:"sm",className:"h-9 text-gray-600 hover:text-gray-900 hover:bg-white/60",children:[(0,b.jsx)(x.X,{className:"h-4 w-4 mr-1"}),"Clear selection"]})]})})}var z=a.i(77687);function A(){let a=(0,d.useSearchParams)(),p=(0,d.useRouter)(),{toast:q}=(0,z.useToast)(),[r,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(new Set),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)("add"),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)("all"),[Q,R]=(0,c.useState)("all"),[S,T]=(0,c.useState)("all"),[U,V]=(0,c.useState)("all"),[W,X]=(0,c.useState)("all"),[Y,Z]=(0,c.useState)("all"),[$,_]=(0,c.useState)(1),[aa,ab]=(0,c.useState)(0),[ac]=(0,c.useState)(25),[ad,ae]=(0,c.useState)(!1);(0,c.useEffect)(()=>{af(),ag(),ah()},[]),(0,c.useEffect)(()=>{let b=a.get("listId");b?X(b):X("all")},[a]),(0,c.useEffect)(()=>{ai()},[M,O,Q,S,U,W,Y,$]);let af=async()=>{let a=await fetch("/api/settings/programmes");v(await a.json())},ag=async()=>{let a=await fetch("/api/settings/recruiters");x(await a.json())},ah=async()=>{try{let a=await fetch("/api/lists");if(!a.ok){console.log("[v0] Lists table not available yet"),B([]);return}let b=await a.json();B(Array.isArray(b)?b:[])}catch(a){console.log("[v0] Error fetching lists:",a),B([])}},ai=async()=>{ae(!0);try{let a=new URLSearchParams({page:$.toString(),pageSize:ac.toString(),...M&&{search:M},..."all"!==O&&{programme:O},..."all"!==Q&&{recruiter:Q},..."all"!==S&&{tag:S},..."all"!==U&&{status:U},..."all"!==W&&{listId:W},..."all"!==Y&&{country:Y}}),b=await fetch(`/api/contacts?${a}`);if(!b.ok){console.log("[v0] Error fetching contacts:",b.statusText),t([]),ab(0),ae(!1);return}let c=await b.json();t(Array.isArray(c.data)?c.data:[]),ab(c.total||0)}catch(a){console.log("[v0] Error fetching contacts:",a),t([]),ab(0)}ae(!1)},aj=a=>{D(a),F(!0)},ak=async a=>{try{(await fetch("add"===K?"/api/lists/add-contacts":"/api/lists/remove-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:a,contactIds:Array.from(G)})})).ok&&(q({title:"Success",description:`${G.size} contacts ${"add"===K?"added to":"removed from"} list`}),H(new Set),ai())}catch(a){q({title:"Error",description:"Failed to update list",variant:"destructive"})}},al=async()=>{let a=Array.from(G).join(",");window.location.href=`/api/contacts/export?ids=${a}`,q({title:"Export started",description:`Exporting ${G.size} contacts to CSV`})},am=Math.ceil(aa/ac),an=($-1)*ac+1,ao=Math.min($*ac,aa),ap=Array.from(new Set(r.flatMap(a=>a.tags||[]))),aq=Array.from(new Set(r.map(a=>a.country).filter(Boolean)));return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Card,{className:"mb-6 bg-[#f9fafc] p-6 border border-gray-200",style:{boxShadow:"0 2px 6px rgba(0,0,0,0.06)"},children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)(f.Input,{placeholder:"Search name or email...",value:M,onChange:a=>{N(a.target.value),_(1)},className:"bg-white h-10"})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,b.jsxs)(h.Select,{value:O,onValueChange:a=>{P(a),_(1)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[170px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Programme"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Programmes"}),u.map(a=>(0,b.jsx)(h.SelectItem,{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)(h.Select,{value:S,onValueChange:a=>{T(a),_(1)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Tag"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Tags"}),ap.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(h.Select,{value:Q,onValueChange:a=>{R(a),_(1)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[160px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Recruiter"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Recruiters"}),w.map(a=>(0,b.jsx)(h.SelectItem,{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)(h.Select,{value:Y,onValueChange:a=>{Z(a),_(1)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[150px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Country"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Countries"}),aq.map(a=>(0,b.jsx)(h.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(h.Select,{value:U,onValueChange:a=>{V(a),_(1)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(h.SelectItem,{value:"contacted",children:"Contacted"}),(0,b.jsx)(h.SelectItem,{value:"pipeline",children:"In Pipeline"}),(0,b.jsx)(h.SelectItem,{value:"interview",children:"Interview"}),(0,b.jsx)(h.SelectItem,{value:"signed",children:"Signed"})]})]}),(0,b.jsxs)(h.Select,{value:W,onValueChange:b=>{X(b),_(1);let c=new URLSearchParams(a.toString());c.set("tab","contacts"),"all"===b?c.delete("listId"):c.set("listId",b),p.push(`/contacts?${c.toString()}`)},children:[(0,b.jsx)(h.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"List"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"all",children:"All Lists"}),A.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>{N(""),P("all"),R("all"),T("all"),V("all"),X("all"),Z("all"),_(1)},className:"bg-white h-10 px-5",children:"Clear filters"})]})]})}),(0,b.jsx)(y,{selectedCount:G.size,onAddToList:()=>{L("add"),J(!0)},onRemoveFromList:()=>{L("remove"),J(!0)},onExportSelected:al,onClearSelection:()=>H(new Set)}),(0,b.jsxs)(e.Card,{className:"bg-white shadow-sm",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,b.jsx)(i.TableHead,{className:"w-12 pl-6",children:(0,b.jsx)(l.Checkbox,{checked:G.size===r.length&&r.length>0,onCheckedChange:a=>{a?H(new Set(r.map(a=>a.id))):H(new Set)}})}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Name"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Email"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Phone"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Programme"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Tags"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Lists"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Recruiter"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Date Created"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Status"})]})}),(0,b.jsx)(i.TableBody,{children:ad?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:10,className:"text-center py-8 text-gray-500",children:"Loading contacts..."})}):0===r.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:10,className:"text-center py-8",children:(0,b.jsxs)("div",{className:"text-gray-500",children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"No contacts found"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Try changing your filters."})]})})}):r.map((a,c)=>{let d;return(0,b.jsxs)(i.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] border-b border-[#E6E8F0] ${c%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:[(0,b.jsx)(i.TableCell,{className:"pl-6",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(l.Checkbox,{checked:G.has(a.id),onCheckedChange:b=>{var c;let d;return c=a.id,d=new Set(G),void(b?d.add(c):d.delete(c),H(d))}})}),(0,b.jsx)(i.TableCell,{className:"font-medium",onClick:()=>aj(a),children:a.name}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:a.email}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:a.phone}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:(0,b.jsxs)(k.Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 font-medium gap-1.5",children:[(0,b.jsx)(o.GraduationCap,{className:"h-3.5 w-3.5"}),a.programme]})}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:(0,b.jsxs)("div",{className:"flex gap-1 flex-wrap max-w-[200px]",children:[a.tags&&a.tags.length>0?a.tags.slice(0,2).map((a,c)=>{let d;return(0,b.jsx)(k.Badge,{className:`${(d=["bg-blue-100 text-blue-700 border-blue-200","bg-purple-100 text-purple-700 border-purple-200","bg-green-100 text-green-700 border-green-200","bg-amber-100 text-amber-700 border-amber-200","bg-pink-100 text-pink-700 border-pink-200","bg-cyan-100 text-cyan-700 border-cyan-200"])[a.split("").reduce((a,b)=>a+b.charCodeAt(0),0)%d.length]} border text-xs px-2 py-0.5`,children:a},c)}):(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"–"}),a.tags&&a.tags.length>2&&(0,b.jsxs)(k.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",a.tags.length-2]})]})}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:(0,b.jsx)("div",{className:"flex gap-1 flex-wrap max-w-[150px]",children:a.lists&&a.lists.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:a.lists[0]}),a.lists.length>1&&(0,b.jsxs)(k.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",a.lists.length-1]})]}):(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"–"})})}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:(0,b.jsx)(k.Badge,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-300",children:a.recruiter})}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:new Date(a.date_created).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),(0,b.jsx)(i.TableCell,{onClick:()=>aj(a),children:(0,b.jsx)(k.Badge,{className:`${(d=a.status.toLowerCase()).includes("pipeline")||d.includes("in pipeline")?"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200 transition-colors":d.includes("contact")?"bg-amber-100 text-amber-700 border-amber-200 hover:bg-amber-200 transition-colors":d.includes("sign")?"bg-green-100 text-green-700 border-green-200 hover:bg-green-200 transition-colors":d.includes("interview")?"bg-purple-100 text-purple-700 border-purple-200 hover:bg-purple-200 transition-colors":"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200 transition-colors"} border font-medium`,children:a.status})})]},a.id)})})]})}),r.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between border-t bg-gray-50 px-6 py-4",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",an," to ",ao," of ",aa.toLocaleString()," contacts"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>_($-1),disabled:1===$,children:[(0,b.jsx)(m.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",$," of ",am]}),(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",onClick:()=>_($+1),disabled:$>=am,children:["Next",(0,b.jsx)(n.ChevronRight,{className:"h-4 w-4"})]})]})]})]}),C&&(0,b.jsx)(j.PlayerDrawer,{player:C,open:E,onClose:()=>F(!1)}),(0,b.jsx)(s,{open:I,onClose:()=>J(!1),onSubmit:ak,action:K,lists:A})]})}var B=a.i(15115),C=a.i(76504),D=a.i(46893);function E({open:a,initialList:d,onClose:e,onSaved:h}){let{toast:i}=(0,z.useToast)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("STATIC"),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)("");(0,c.useEffect)(()=>{a&&(d?(k(d.name),m(d.description||""),o(d.type)):(k(""),m(""),o("STATIC")),u(""))},[a,d]);let v=async()=>{if(!j.trim())return void u("List name is required");u(""),s(!0);try{let a=d?`/api/lists/${d.id}`:"/api/lists",b=d?"PUT":"POST",c={name:j.trim(),description:l.trim()||void 0,type:n};"SMART"===n&&(c.filtersJson={});let e=await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(e.ok)i({title:d?"List updated":"List created",description:`${j} has been ${d?"updated":"created"} successfully`}),h();else{let a=await e.json();i({title:"Error",description:a.error||`Failed to ${d?"update":"create"} list`,variant:"destructive"})}}catch(a){i({title:"Error",description:`Failed to ${d?"update":"create"} list`,variant:"destructive"})}finally{s(!1)}};return(0,b.jsx)(p.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(p.DialogContent,{className:"sm:max-w-[500px] bg-white shadow-xl",children:[(0,b.jsx)(p.DialogHeader,{className:"border-b pb-5",children:(0,b.jsx)(p.DialogTitle,{className:"text-[26px] font-semibold tracking-tight text-gray-900",children:d?"Edit List":"Create New List"})}),(0,b.jsxs)("div",{className:"space-y-6 py-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"list-name",className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"List name"}),(0,b.jsx)(f.Input,{id:"list-name",value:j,onChange:a=>{k(a.target.value),t&&u("")},placeholder:"e.g. Q1 2025 Prospects",className:`h-11 ${t?"border-red-500 focus-visible:ring-red-500":""}`}),t&&(0,b.jsx)("p",{className:"text-sm text-red-600 mt-1",children:t})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q.Label,{htmlFor:"list-description",className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"Description (optional)"}),(0,b.jsx)(D.Textarea,{id:"list-description",value:l,onChange:a=>m(a.target.value),placeholder:"What is this list for?",rows:3,className:"resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(q.Label,{className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"List type"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>o("STATIC"),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all text-left ${"STATIC"===n?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[(0,b.jsx)("div",{className:"font-medium text-[15px] text-gray-900",children:"Static"}),(0,b.jsx)("div",{className:"text-[13px] text-gray-500 mt-0.5",children:"Manually add and remove contacts"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>o("SMART"),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all text-left ${"SMART"===n?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[(0,b.jsx)("div",{className:"font-medium text-[15px] text-gray-900",children:"Smart"}),(0,b.jsx)("div",{className:"text-[13px] text-gray-500 mt-0.5",children:"Auto-include contacts matching filters"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:e,className:"px-6",children:"Cancel"}),(0,b.jsx)(g.Button,{onClick:v,disabled:!j.trim()||r,className:"px-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:r?d?"Updating...":"Creating...":d?"Save List":"Create List"})]})]})})}var F=a.i(210),G=a.i(81560);let H=(0,t.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function I({list:a,onBack:d}){let{toast:f}=(0,z.useToast)(),[h,m]=(0,c.useState)([]),[n,p]=(0,c.useState)(null),[q,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(new Set),[v,x]=(0,c.useState)(!1);(0,c.useEffect)(()=>{y()},[a.id]);let y=async()=>{x(!0);let b=await fetch(`/api/lists/${a.id}/contacts`);m(await b.json()),x(!1)},A=async()=>{!confirm(`Are you sure you want to delete "${a.name}"?`)||(await fetch(`/api/lists/${a.id}`,{method:"DELETE"})).ok&&(f({title:"List deleted",description:"The list has been removed"}),d())},B=async()=>{0===t.size||(await fetch("/api/lists/remove-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:a.id.toString(),contactIds:Array.from(t)})})).ok&&(f({title:"Contacts removed",description:`${t.size} contacts removed from list`}),u(new Set),y())};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)(g.Button,{variant:"ghost",onClick:d,className:"gap-2 mb-4 -ml-2",children:[(0,b.jsx)(F.ArrowLeft,{className:"h-4 w-4"}),"Back to lists"]}),(0,b.jsx)(e.Card,{className:"p-6 bg-white",children:(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:a.name}),(0,b.jsx)(k.Badge,{className:"smart"===a.type?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",children:a.type})]}),a.description&&(0,b.jsx)("p",{className:"text-gray-600",children:a.description}),(0,b.jsxs)("div",{className:"flex gap-4 mt-3 text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:[a.contactCount.toLocaleString()," contacts"]}),(0,b.jsxs)("span",{children:["Created"," ",new Date(a.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:()=>{window.location.href=`/api/lists/${a.id}/export`,f({title:"Export started",description:"Exporting list contacts to CSV"})},variant:"outline",className:"gap-2",children:[(0,b.jsx)(w.Download,{className:"h-4 w-4"}),"Export CSV"]}),"smart"===a.type&&(0,b.jsxs)(g.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(H,{className:"h-4 w-4"}),"Edit filters"]}),"static"===a.type&&(0,b.jsxs)(g.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),"Add contacts"]}),(0,b.jsxs)(g.Button,{variant:"outline",className:"gap-2",onClick:A,children:[(0,b.jsx)(G.Trash2,{className:"h-4 w-4"}),"Delete"]})]})]})})]}),t.size>0&&"static"===a.type&&(0,b.jsx)(e.Card,{className:"mb-4 p-4 bg-blue-50 border-blue-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[t.size," contacts selected"]}),(0,b.jsxs)(g.Button,{onClick:B,size:"sm",variant:"outline",className:"gap-2",children:[(0,b.jsx)(G.Trash2,{className:"h-3.5 w-3.5"}),"Remove from list"]})]})}),(0,b.jsx)(e.Card,{className:"bg-white shadow-sm",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:["static"===a.type&&(0,b.jsx)(i.TableHead,{className:"w-12 pl-6",children:(0,b.jsx)(l.Checkbox,{checked:t.size===h.length&&h.length>0,onCheckedChange:a=>{a?u(new Set(h.map(a=>a.id))):u(new Set)}})}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Name"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Email"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Phone"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Programme"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Recruiter"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Status"})]})}),(0,b.jsx)(i.TableBody,{children:v?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Loading contacts..."})}):0===h.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:7,className:"text-center py-12",children:(0,b.jsxs)("div",{className:"text-gray-500",children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"No contacts in this list"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Add contacts to get started."})]})})}):h.map((c,d)=>{let e;return(0,b.jsxs)(i.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] ${d%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:["static"===a.type&&(0,b.jsx)(i.TableCell,{className:"pl-6",onClick:a=>a.stopPropagation(),children:(0,b.jsx)(l.Checkbox,{checked:t.has(c.id),onCheckedChange:a=>{var b;let d;return b=c.id,d=new Set(t),void(a?d.add(b):d.delete(b),u(d))}})}),(0,b.jsx)(i.TableCell,{className:"font-medium",onClick:()=>{p(c),s(!0)},children:c.name}),(0,b.jsx)(i.TableCell,{onClick:()=>{p(c),s(!0)},children:c.email}),(0,b.jsx)(i.TableCell,{onClick:()=>{p(c),s(!0)},children:c.phone}),(0,b.jsx)(i.TableCell,{onClick:()=>{p(c),s(!0)},children:(0,b.jsxs)(k.Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 font-medium gap-1.5",children:[(0,b.jsx)(o.GraduationCap,{className:"h-3.5 w-3.5"}),c.programme]})}),(0,b.jsx)(i.TableCell,{onClick:()=>{p(c),s(!0)},children:(0,b.jsx)(k.Badge,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-300",children:c.recruiter})}),(0,b.jsx)(i.TableCell,{onClick:()=>{p(c),s(!0)},children:(0,b.jsx)(k.Badge,{className:`${(e=c.status.toLowerCase()).includes("pipeline")?"bg-blue-100 text-blue-700 border-blue-200":e.includes("contact")?"bg-amber-100 text-amber-700 border-amber-200":e.includes("sign")?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200"} border font-medium`,children:c.status})})]},c.id)})})]})})}),n&&(0,b.jsx)(j.PlayerDrawer,{player:n,open:q,onClose:()=>s(!1)})]})}function J(){let a=(0,d.useRouter)(),{toast:f}=(0,z.useToast)(),[h,j]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1);(0,c.useEffect)(()=>{x()},[]);let x=async()=>{q(!0);try{let a=await fetch("/api/lists");if(!a.ok){console.error("[v0] Failed to fetch lists:",a.status),j([]);return}let b=await a.json();j(Array.isArray(b)?b:[])}catch(a){console.error("[v0] Error fetching lists:",a),j([])}finally{q(!1)}},y=async a=>{window.location.href=`/api/lists/${a}/export`,f({title:"Export started",description:"Exporting list to CSV"})},A=async a=>{!confirm("Are you sure you want to delete this list?")||(await fetch(`/api/lists/${a}`,{method:"DELETE"})).ok&&(f({title:"List deleted",description:"The list has been removed"}),x())},D=b=>{a.push(`/contacts?tab=contacts&listId=${b.id}`)};return l?(0,b.jsx)(I,{list:l,onBack:()=>{m(null),x()}}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Lists"}),(0,b.jsxs)(g.Button,{onClick:()=>o(!0),className:"gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:[(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),"Create List"]})]}),(0,b.jsx)(e.Card,{className:"bg-white shadow-sm",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"List Name"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Type"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Contacts"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Created"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Last Exported"}),(0,b.jsx)(i.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Actions"})]})}),(0,b.jsx)(i.TableBody,{children:p?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Loading lists..."})}):0===h.length?(0,b.jsx)(i.TableRow,{children:(0,b.jsx)(i.TableCell,{colSpan:6,className:"text-center py-12",children:(0,b.jsxs)("div",{className:"text-gray-500",children:[(0,b.jsx)("p",{className:"text-lg font-medium",children:"No lists yet"}),(0,b.jsx)("p",{className:"text-sm mt-1",children:"Create your first list to get started."}),(0,b.jsxs)(g.Button,{onClick:()=>o(!0),className:"mt-4 gap-2 bg-gradient-to-r from-blue-600 to-blue-700",children:[(0,b.jsx)(r.Plus,{className:"h-4 w-4"}),"Create List"]})]})})}):h.map((a,c)=>(0,b.jsxs)(i.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] ${c%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:[(0,b.jsx)(i.TableCell,{className:"font-medium",onClick:()=>D(a),children:a.name}),(0,b.jsx)(i.TableCell,{onClick:()=>D(a),children:(0,b.jsx)(k.Badge,{className:"smart"===a.type?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",children:a.type})}),(0,b.jsx)(i.TableCell,{onClick:()=>D(a),children:a.contactCount.toLocaleString()}),(0,b.jsx)(i.TableCell,{onClick:()=>D(a),children:new Date(a.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),(0,b.jsx)(i.TableCell,{onClick:()=>D(a),children:a.lastExported?new Date(a.lastExported).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Never"}),(0,b.jsx)(i.TableCell,{children:(0,b.jsxs)(C.DropdownMenu,{children:[(0,b.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,b.jsx)(B.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(C.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(C.DropdownMenuItem,{onClick:()=>D(a),children:"View details"}),(0,b.jsx)(C.DropdownMenuItem,{onClick:()=>{t({id:String(a.id),name:a.name,description:null,type:a.type.toUpperCase()}),v(!0)},children:"Rename / Edit"}),(0,b.jsxs)(C.DropdownMenuItem,{onClick:()=>y(a.id),children:[(0,b.jsx)(w.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),(0,b.jsx)(C.DropdownMenuItem,{onClick:()=>A(a.id),className:"text-red-600",children:"Delete list"})]})]})})]},a.id))})]})})}),(0,b.jsx)(E,{open:n,onClose:()=>o(!1),onSaved:()=>{o(!1),x()}}),(0,b.jsx)(E,{open:u,initialList:s,onClose:()=>{v(!1),t(null)},onSaved:()=>{v(!1),t(null),x()}})]})}function K(){let a=(0,d.useSearchParams)(),f=(0,d.useRouter)(),[g,h]=(0,c.useState)(a.get("tab")||"contacts");(0,c.useEffect)(()=>{let b=a.get("tab");b&&b!==g&&h(b)},[a]);let i=b=>{h(b);let c=new URLSearchParams(a.toString());c.set("tab",b),"lists"===b&&c.delete("listId"),f.push(`/contacts?${c.toString()}`)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Oswald:wght@500&display=swap",rel:"stylesheet"}),(0,b.jsx)(e.Card,{className:"mb-6 bg-white border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex gap-1 p-2 border-b",children:[(0,b.jsx)("button",{onClick:()=>i("contacts"),className:`px-6 py-2.5 rounded-lg text-[15px] font-medium transition-all ${"contacts"===g?"bg-[#0A47B1] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,style:{fontFamily:"'Oswald', sans-serif",letterSpacing:"0.5px"},children:"Contacts"}),(0,b.jsx)("button",{onClick:()=>i("lists"),className:`px-6 py-2.5 rounded-lg text-[15px] font-medium transition-all ${"lists"===g?"bg-[#0A47B1] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,style:{fontFamily:"'Oswald', sans-serif",letterSpacing:"0.5px"},children:"Lists"})]})}),"contacts"===g?(0,b.jsx)(A,{}):(0,b.jsx)(J,{})]})}a.s(["ContactsContent",()=>K],24575)}];

//# sourceMappingURL=components_contacts_contacts-content_tsx_8ede9177._.js.map