(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},40495,e=>{"use strict";var t=e.i(43476),s=e.i(80154),a=e.i(99394);function r({children:e,user:r,title:i}){return(0,t.jsxs)("div",{className:"flex min-h-screen bg-[#f9fafc]",children:[(0,t.jsx)(s.AppSidebar,{}),(0,t.jsxs)("div",{className:"flex-1 lg:pl-60 max-w-full overflow-hidden",children:[(0,t.jsx)(a.AppHeader,{user:r,title:i}),(0,t.jsx)("main",{className:"p-6 max-w-full",children:e})]})]})}e.s(["AppLayout",()=>r])},10708,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(48425),r=s.forwardRef((e,s)=>(0,t.jsx)(a.Primitive.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(47163);function l({className:e,...s}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>l],10708)},84762,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},70065,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},20682,e=>{"use strict";var t=e.i(71645);let s=0,a=new Map,r=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},i=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function n({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,s]=t.useState(l);return t.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:n,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},51975,e=>{"use strict";let t=(0,e.i(75254).default)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);e.s(["Tag",()=>t],51975)},82293,e=>{"use strict";let t=(0,e.i(75254).default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);e.s(["UserCheck",()=>t],82293)},19036,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(20783),i=e.i(30030),l=e.i(69340),d=e.i(99682),n=e.i(35804),c=e.i(48425),o="Switch",[x,m]=(0,i.createContextScope)(o),[u,g]=x(o),h=s.forwardRef((e,i)=>{let{__scopeSwitch:d,name:n,checked:o,defaultChecked:x,required:m,disabled:g,value:h="on",onCheckedChange:p,form:f,...j}=e,[b,N]=s.useState(null),w=(0,r.useComposedRefs)(i,e=>N(e)),k=s.useRef(!1),C=!b||f||!!b.closest("form"),[S=!1,T]=(0,l.useControllableState)({prop:o,defaultProp:x,onChange:p});return(0,t.jsxs)(u,{scope:d,checked:S,disabled:g,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":m,"data-state":y(S),"data-disabled":g?"":void 0,disabled:g,value:h,...j,ref:w,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{T(e=>!e),C&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),C&&(0,t.jsx)(v,{control:b,bubbles:!k.current,name:n,value:h,checked:S,required:m,disabled:g,form:f,style:{transform:"translateX(-100%)"}})]})});h.displayName=o;var p="SwitchThumb",f=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,i=g(p,a);return(0,t.jsx)(c.Primitive.span,{"data-state":y(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});f.displayName=p;var v=e=>{let{control:a,checked:r,bubbles:i=!0,...l}=e,c=s.useRef(null),o=(0,d.usePrevious)(r),x=(0,n.useSize)(a);return s.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[o,r,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:c,style:{...e.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var j=e.i(47163);function b({className:e,...s}){return(0,t.jsx)(h,{"data-slot":"switch",className:(0,j.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(f,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>b],19036)},99526,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(67881),r=e.i(94179),i=e.i(62870),l=e.i(63488),d=e.i(3116),n=e.i(63209),c=e.i(86536),o=e.i(25652),x=e.i(30374),m=e.i(95468),u=e.i(73884);function g({run:e,open:s,onClose:a}){let i,n=()=>(e.successCount/e.totalRecipients*100).toFixed(1),c=e=>new Date(e).toLocaleString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),g=100===(i=parseFloat(n()))?{text:"All succeeded",class:"bg-green-100 text-green-700 border-green-200"}:e.failedCount===e.totalRecipients?{text:"All failed",class:"bg-red-100 text-red-700 border-red-200"}:i>=95?{text:"Mostly succeeded",class:"bg-green-100 text-green-700 border-green-200"}:{text:"Partial success",class:"bg-amber-100 text-amber-700 border-amber-200"};return(0,t.jsx)(x.Dialog,{open:s,onOpenChange:a,children:(0,t.jsxs)(x.DialogContent,{className:"max-w-3xl max-h-[90vh] my-4 overflow-hidden p-0 flex flex-col",children:[(0,t.jsx)(x.DialogHeader,{className:"border-b pb-4 mb-5",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,t.jsx)("div",{className:"w-11 h-11 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(l.Mail,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(x.DialogTitle,{className:"text-lg font-bold text-gray-900 mb-1",children:e.workflowName}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Batch run • ",e.totalRecipients.toLocaleString()," contacts"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2 ml-4",children:[(0,t.jsx)(r.Badge,{variant:"outline",className:`text-xs ${g.class}`,children:g.text}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:c(e.startedAt)})]})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Batch Summary"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 px-4 py-4 rounded-b-lg border border-gray-200 bg-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Trigger"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.trigger})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Total Recipients"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.totalRecipients.toLocaleString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Started at"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:c(e.startedAt)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Completed at"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.completedAt?c(e.completedAt):"Still running"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Duration"}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.duration})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Success Rate"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[n(),"%"]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Delivery Statistics"})}),(0,t.jsxs)("div",{className:"rounded-b-lg border border-gray-200 bg-white divide-y divide-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:(0,t.jsx)(m.CheckCircle2,{className:"h-4 w-4 text-green-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Succeeded"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-base font-bold text-gray-900",children:e.successCount.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.successCount/e.totalRecipients*100).toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:(0,t.jsx)(u.XCircle,{className:"h-4 w-4 text-red-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Failed"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-base font-bold text-gray-900",children:e.failedCount.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.failedCount/e.totalRecipients*100).toFixed(1),"%"]})]})]}),e.skippedCount>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center",children:(0,t.jsx)(d.Clock,{className:"h-4 w-4 text-gray-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Skipped"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-base font-bold text-gray-900",children:e.skippedCount.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.skippedCount/e.totalRecipients*100).toFixed(1),"%"]})]})]})]})]}),null!==e.avgOpenRate&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-b-0 border-gray-200",children:(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wide",children:"Engagement Metrics"})}),(0,t.jsxs)("div",{className:"rounded-b-lg border border-gray-200 bg-white divide-y divide-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:(0,t.jsx)(o.TrendingUp,{className:"h-4 w-4 text-blue-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Average Open Rate"})]}),(0,t.jsxs)("div",{className:"text-base font-bold text-gray-900",children:[e.avgOpenRate,"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center",children:(0,t.jsx)(o.TrendingUp,{className:"h-4 w-4 text-green-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Average Click Rate"})]}),(0,t.jsxs)("div",{className:"text-base font-bold text-gray-900",children:[e.avgClickRate,"%"]})]})]})]})]})})}let h=[{id:"1",workflowId:1,workflowName:"New Lead Follow-Up",workflowIcon:"mail",workflowDescription:"3-step email sequence over 7 days.",totalRecipients:1247,successCount:1198,failedCount:49,skippedCount:0,trigger:"New player added",startedAt:"2025-01-18T10:30:00Z",completedAt:"2025-01-18T10:35:23Z",duration:"5m 23s",avgOpenRate:68.4,avgClickRate:24.7},{id:"2",workflowId:2,workflowName:"Signed Player Welcome",workflowIcon:"user-check",workflowDescription:"Welcome sequence for new signees.",totalRecipients:89,successCount:87,failedCount:2,skippedCount:0,trigger:"Player status changed to Signed",startedAt:"2025-01-18T08:15:00Z",completedAt:"2025-01-18T08:16:45Z",duration:"1m 45s",avgOpenRate:82.3,avgClickRate:31.2},{id:"3",workflowId:3,workflowName:"Invoice Reminder",workflowIcon:"receipt",workflowDescription:"Reminds parents of overdue invoices.",totalRecipients:342,successCount:0,failedCount:342,skippedCount:0,trigger:"Invoice overdue by 7 days",startedAt:"2025-01-17T14:00:00Z",completedAt:"2025-01-17T14:02:15Z",duration:"2m 15s",avgOpenRate:null,avgClickRate:null},{id:"4",workflowId:1,workflowName:"New Lead Follow-Up",workflowIcon:"mail",workflowDescription:"3-step email sequence over 7 days.",totalRecipients:892,successCount:892,failedCount:0,skippedCount:0,trigger:"New player added",startedAt:"2025-01-16T11:00:00Z",completedAt:"2025-01-16T11:04:12Z",duration:"4m 12s",avgOpenRate:71.2,avgClickRate:28.1}];function p({user:e}){let[x,m]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0),[f,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(null),[b,N]=(0,s.useState)(!1),[w,k]=(0,s.useState)("all"),[C,S]=(0,s.useState)("all"),[T,A]=(0,s.useState)("30");(0,s.useEffect)(()=>{R()},[w,C,T]);let R=async()=>{try{p(!0),v(!1),await new Promise(e=>setTimeout(e,800));let e=[...h];"all"!==w&&(e=e.filter(e=>e.workflowId.toString()===w)),"all"!==C&&("succeeded"===C?e=e.filter(e=>e.successCount>0&&0===e.failedCount):"failed"===C&&(e=e.filter(e=>e.failedCount>0))),m(e)}catch(e){v(!0)}finally{p(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mb-5 flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(i.Select,{value:w,onValueChange:k,children:[(0,t.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,t.jsx)(i.SelectValue,{placeholder:"All workflows"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"all",children:"All workflows"}),(0,t.jsx)(i.SelectItem,{value:"1",children:"New Lead Follow-Up"}),(0,t.jsx)(i.SelectItem,{value:"2",children:"Signed Player Welcome"}),(0,t.jsx)(i.SelectItem,{value:"3",children:"Invoice Reminder"})]})]}),(0,t.jsxs)(i.Select,{value:C,onValueChange:S,children:[(0,t.jsx)(i.SelectTrigger,{className:"w-[160px]",children:(0,t.jsx)(i.SelectValue,{placeholder:"All statuses"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"all",children:"All statuses"}),(0,t.jsx)(i.SelectItem,{value:"succeeded",children:"Succeeded"}),(0,t.jsx)(i.SelectItem,{value:"failed",children:"Failed"})]})]}),(0,t.jsxs)(i.Select,{value:T,onValueChange:A,children:[(0,t.jsx)(i.SelectTrigger,{className:"w-[160px]",children:(0,t.jsx)(i.SelectValue,{placeholder:"Date range"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"7",children:"Last 7 days"}),(0,t.jsx)(i.SelectItem,{value:"30",children:"Last 30 days"}),(0,t.jsx)(i.SelectItem,{value:"90",children:"Last 90 days"})]})]})]})}),f&&(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between rounded-lg border border-red-200 bg-red-50 px-4 py-3 border-l-4 border-l-red-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.AlertCircle,{className:"h-4 w-4 text-red-600"}),(0,t.jsx)("p",{className:"text-sm text-red-800",children:"We couldn't load run history. Please try again."})]}),(0,t.jsx)(a.Button,{variant:"link",size:"sm",onClick:()=>{R()},className:"text-red-600 hover:text-red-700 h-auto p-0",children:"Retry"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3 bg-gray-50 border-b border-gray-200 text-xs font-semibold text-gray-700 uppercase tracking-wide",children:[(0,t.jsx)("div",{children:"Workflow"}),(0,t.jsx)("div",{children:"Recipients"}),(0,t.jsx)("div",{children:"Status"}),(0,t.jsx)("div",{children:"Started"}),(0,t.jsx)("div",{children:"Duration"}),(0,t.jsx)("div",{children:"Engagement"}),(0,t.jsx)("div",{className:"text-center",children:"Action"})]}),u?(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-4 w-40 bg-[#E5E7EB] animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-3 w-56 bg-[#E5E7EB] animate-pulse rounded"})]}),(0,t.jsx)("div",{className:"h-4 w-32 bg-[#E5E7EB] animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-6 w-28 bg-[#E5E7EB] animate-pulse rounded-full"}),(0,t.jsx)("div",{className:"h-4 w-20 bg-[#E5E7EB] animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-[#E5E7EB] animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-4 w-20 bg-[#E5E7EB] animate-pulse rounded"}),(0,t.jsx)("div",{className:"h-8 w-8 bg-[#E5E7EB] animate-pulse rounded mx-auto"})]},e))}):0===x.length?(0,t.jsxs)("div",{className:"py-16 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-gray-100 p-4 mb-3",children:(0,t.jsx)(d.Clock,{className:"h-8 w-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"No runs to show yet"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 max-w-md text-center",children:"Once your automations start sending messages, you'll see each batch run listed here."})]}):(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:x.map(e=>{let s=(e=>{let t=parseFloat((e.successCount/e.totalRecipients*100).toFixed(1));return 100===t?{text:"All succeeded",class:"bg-green-100 text-green-700 border-green-200"}:e.failedCount===e.totalRecipients?{text:"All failed",class:"bg-red-100 text-red-700 border-red-200"}:t>=95?{text:"Mostly succeeded",class:"bg-green-100 text-green-700 border-green-200"}:{text:"Partial success",class:"bg-amber-100 text-amber-700 border-amber-200"}})(e);return(0,t.jsxs)("div",{className:"grid grid-cols-[2.5fr_1fr_140px_120px_120px_120px_80px] gap-4 px-4 py-3 hover:bg-gray-50 transition-colors items-center",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex-shrink-0",children:(0,t.jsx)(l.Mail,{className:"h-4 w-4 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-900 leading-snug",children:e.workflowName}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:e.workflowDescription})]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-base font-bold text-gray-900",children:e.totalRecipients.toLocaleString()}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5",children:[(0,t.jsx)("span",{className:"text-green-600 font-medium",children:e.successCount.toLocaleString()}),e.failedCount>0&&(0,t.jsxs)(t.Fragment,{children:[" • ",(0,t.jsxs)("span",{className:"text-red-600 font-medium",children:[e.failedCount.toLocaleString()," failed"]})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsx)(r.Badge,{variant:"outline",className:`text-xs ${s.class}`,children:s.text})}),(0,t.jsx)("div",{className:"text-sm text-gray-700",children:new Date(e.startedAt).toLocaleString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.duration}),(0,t.jsx)("div",{children:null!==e.avgOpenRate?(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[(0,t.jsx)(o.TrendingUp,{className:"h-3 w-3 text-blue-600"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.avgOpenRate,"%"]}),(0,t.jsx)("span",{className:"text-gray-500",children:"opens"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-700",children:[(0,t.jsx)(o.TrendingUp,{className:"h-3 w-3 text-green-600"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.avgClickRate,"%"]}),(0,t.jsx)("span",{className:"text-gray-500",children:"clicks"})]})]}):(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"No data"})}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-blue-50",onClick:()=>{j(e),N(!0)},children:(0,t.jsx)(c.Eye,{className:"h-4 w-4 text-gray-400"})})})]},e.id)})})]}),y&&(0,t.jsx)(g,{run:y,open:b,onClose:()=>N(!1)})]})}e.s(["RunHistoryContent",()=>p],99526)}]);