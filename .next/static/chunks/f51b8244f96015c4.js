(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},40495,e=>{"use strict";var t=e.i(43476),a=e.i(80154),s=e.i(99394);function l({children:e,user:l,title:i}){return(0,t.jsxs)("div",{className:"flex min-h-screen bg-[#f9fafc]",children:[(0,t.jsx)(a.AppSidebar,{}),(0,t.jsxs)("div",{className:"flex-1 lg:pl-60 max-w-full overflow-hidden",children:[(0,t.jsx)(s.AppHeader,{user:l,title:i}),(0,t.jsx)("main",{className:"p-6 max-w-full",children:e})]})]})}e.s(["AppLayout",()=>l])},23585,e=>{"use strict";let t=(0,e.i(75254).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},10708,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(48425),l=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=e.i(47163);function r({className:e,...a}){return(0,t.jsx)(l,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>r],10708)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},84762,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},25959,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(20783),l=e.i(30030),i=e.i(81140),r=e.i(69340),n=e.i(99682),c=e.i(35804),o=e.i(96626),d=e.i(48425),m="Checkbox",[u,h]=(0,l.createContextScope)(m),[x,p]=u(m),g=a.forwardRef((e,l)=>{let{__scopeCheckbox:n,name:c,checked:o,defaultChecked:m,required:u,disabled:h,value:p="on",onCheckedChange:g,form:v,...b}=e,[N,w]=a.useState(null),k=(0,s.useComposedRefs)(l,e=>w(e)),S=a.useRef(!1),C=!N||v||!!N.closest("form"),[T=!1,E]=(0,r.useControllableState)({prop:o,defaultProp:m,onChange:g}),I=a.useRef(T);return a.useEffect(()=>{let e=N?.form;if(e){let t=()=>E(I.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[N,E]),(0,t.jsxs)(x,{scope:n,state:T,disabled:h,children:[(0,t.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":y(T)?"mixed":T,"aria-required":u,"data-state":j(T),"data-disabled":h?"":void 0,disabled:h,value:p,...b,ref:k,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(e.onClick,e=>{E(e=>!!y(e)||!e),C&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),C&&(0,t.jsx)(f,{control:N,bubbles:!S.current,name:c,value:p,checked:T,required:u,disabled:h,form:v,style:{transform:"translateX(-100%)"},defaultChecked:!y(m)&&m})]})});g.displayName=m;var v="CheckboxIndicator",b=a.forwardRef((e,a)=>{let{__scopeCheckbox:s,forceMount:l,...i}=e,r=p(v,s);return(0,t.jsx)(o.Presence,{present:l||y(r.state)||!0===r.state,children:(0,t.jsx)(d.Primitive.span,{"data-state":j(r.state),"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var f=e=>{let{control:s,checked:l,bubbles:i=!0,defaultChecked:r,...o}=e,d=a.useRef(null),m=(0,n.usePrevious)(l),u=(0,c.useSize)(s);a.useEffect(()=>{let e=d.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==l&&t){let a=new Event("click",{bubbles:i});e.indeterminate=y(l),t.call(e,!y(l)&&l),e.dispatchEvent(a)}},[m,l,i]);let h=a.useRef(!y(l)&&l);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r??h.current,...o,tabIndex:-1,ref:d,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return"indeterminate"===e}function j(e){return y(e)?"indeterminate":e?"checked":"unchecked"}var N=e.i(78784),w=e.i(47163);function k({className:e,...a}){return(0,t.jsx)(g,{"data-slot":"checkbox",className:(0,w.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(b,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(N.CheckIcon,{className:"size-3.5"})})})}e.s(["Checkbox",()=>k],25959)},86311,e=>{"use strict";let t=(0,e.i(75254).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],86311)},70065,e=>{"use strict";var t=e.i(43476),a=e.i(47163);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>r,"CardHeader",()=>l,"CardTitle",()=>i])},20682,e=>{"use strict";var t=e.i(71645);let a=0,s=new Map,l=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),n({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=[],r={toasts:[]};function n(e){r=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(r,e),i.forEach(e=>{e(r)})}function c({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>n({type:"DISMISS_TOAST",toastId:t});return n({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>n({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,a]=t.useState(r);return t.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>n({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>o])},27341,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(81140),l=e.i(30030),i=e.i(42727),r=e.i(96626),n=e.i(48425),c=e.i(86318),o=e.i(69340),d=e.i(10772),m="Tabs",[u,h]=(0,l.createContextScope)(m,[i.createRovingFocusGroupScope]),x=(0,i.createRovingFocusGroupScope)(),[p,g]=u(m),v=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:l,onValueChange:i,defaultValue:r,orientation:m="horizontal",dir:u,activationMode:h="automatic",...x}=e,g=(0,c.useDirection)(u),[v,b]=(0,o.useControllableState)({prop:l,onChange:i,defaultProp:r});return(0,t.jsx)(p,{scope:s,baseId:(0,d.useId)(),value:v,onValueChange:b,orientation:m,dir:g,activationMode:h,children:(0,t.jsx)(n.Primitive.div,{dir:g,"data-orientation":m,...x,ref:a})})});v.displayName=m;var b="TabsList",f=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:l=!0,...r}=e,c=g(b,s),o=x(s);return(0,t.jsx)(i.Root,{asChild:!0,...o,orientation:c.orientation,dir:c.dir,loop:l,children:(0,t.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...r,ref:a})})});f.displayName=b;var y="TabsTrigger",j=a.forwardRef((e,a)=>{let{__scopeTabs:l,value:r,disabled:c=!1,...o}=e,d=g(y,l),m=x(l),u=k(d.baseId,r),h=S(d.baseId,r),p=r===d.value;return(0,t.jsx)(i.Item,{asChild:!0,...m,focusable:!c,active:p,children:(0,t.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":h,"data-state":p?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:u,...o,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(r)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(r)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;p||c||!e||d.onValueChange(r)})})})});j.displayName=y;var N="TabsContent",w=a.forwardRef((e,s)=>{let{__scopeTabs:l,value:i,forceMount:c,children:o,...d}=e,m=g(N,l),u=k(m.baseId,i),h=S(m.baseId,i),x=i===m.value,p=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(r.Presence,{present:c||x,children:({present:a})=>(0,t.jsx)(n.Primitive.div,{"data-state":x?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:h,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:a&&o})})});function k(e,t){return`${e}-trigger-${t}`}function S(e,t){return`${e}-content-${t}`}w.displayName=N;var C=e.i(47163);function T({className:e,...a}){return(0,t.jsx)(v,{"data-slot":"tabs",className:(0,C.cn)("flex flex-col gap-2",e),...a})}function E({className:e,...a}){return(0,t.jsx)(f,{"data-slot":"tabs-list",className:(0,C.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...a})}function I({className:e,...a}){return(0,t.jsx)(j,{"data-slot":"tabs-trigger",className:(0,C.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...a})}function M({className:e,...a}){return(0,t.jsx)(w,{"data-slot":"tabs-content",className:(0,C.cn)("flex-1 outline-none",e),...a})}e.s(["Tabs",()=>T,"TabsContent",()=>M,"TabsList",()=>E,"TabsTrigger",()=>I],27341)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},35501,e=>{"use strict";let t=(0,e.i(75254).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["ImageIcon",()=>t],35501)},58472,e=>{"use strict";let t=(0,e.i(75254).default)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);e.s(["Code",()=>t],58472)},49143,e=>{"use strict";var t=e.i(43476),a=e.i(40495),s=e.i(67881),l=e.i(7233),i=e.i(69074),r=e.i(71645),n=e.i(18566),c=e.i(70065),o=e.i(23750),d=e.i(62870),m=e.i(94179),u=e.i(63415),h=e.i(63488),x=e.i(86311),p=e.i(23585),g=e.i(88511),v=e.i(74886),b=e.i(27612),f=e.i(86536),y=e.i(55436),j=e.i(75254);let N=(0,j.default)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var w=e.i(20682);function k({onEdit:e,onPreview:a,onUseTemplate:l}){let{toast:i}=(0,w.useToast)(),j=(0,n.useRouter)(),[k,S]=(0,r.useState)([]),[C,T]=(0,r.useState)(!0),[E,I]=(0,r.useState)("all"),[M,L]=(0,r.useState)("all"),[D,P]=(0,r.useState)("updated"),[A,B]=(0,r.useState)("");(0,r.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await fetch("/api/templates"),t=await e.json();S(t.data||[])}catch(e){console.error("Failed to fetch templates:",e)}finally{T(!1)}},R=async e=>{if(confirm("Are you sure you want to delete this template?"))try{(await fetch(`/api/templates/${e}`,{method:"DELETE"})).ok&&(i({title:"Template deleted",description:"The template has been deleted successfully."}),z())}catch(e){i({title:"Error",description:"Failed to delete template.",variant:"destructive"})}},F=async e=>{try{(await fetch("/api/templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,name:`${e.name} (Copy)`,id:void 0})})).ok&&(i({title:"Template duplicated",description:"A copy of the template has been created."}),z())}catch(e){i({title:"Error",description:"Failed to duplicate template.",variant:"destructive"})}},O=k.filter(e=>("all"===E||e.type===E)&&("all"===M||e.category===M)&&(!A||!!e.name.toLowerCase().includes(A.toLowerCase()))).sort((e,t)=>"updated"===D?new Date(t.updated_at).getTime()-new Date(e.updated_at).getTime():"name"===D?e.name.localeCompare(t.name):"usage"===D?t.usage_count-e.usage_count:0);return C?(0,t.jsx)("div",{className:"text-center py-12",children:"Loading templates..."}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(c.Card,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)(d.Select,{value:E,onValueChange:I,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[140px]",children:(0,t.jsx)(d.SelectValue,{placeholder:"Type"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All Types"}),(0,t.jsx)(d.SelectItem,{value:"email",children:"Email"}),(0,t.jsx)(d.SelectItem,{value:"sms",children:"SMS"})]})]}),(0,t.jsxs)(d.Select,{value:M,onValueChange:L,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[160px]",children:(0,t.jsx)(d.SelectValue,{placeholder:"Category"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All Categories"}),(0,t.jsx)(d.SelectItem,{value:"newsletter",children:"Newsletter"}),(0,t.jsx)(d.SelectItem,{value:"announcement",children:"Announcement"}),(0,t.jsx)(d.SelectItem,{value:"follow-up",children:"Follow-up"}),(0,t.jsx)(d.SelectItem,{value:"invoice",children:"Invoice"})]})]}),(0,t.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,t.jsx)(y.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,t.jsx)(o.Input,{placeholder:"Search templates...",value:A,onChange:e=>B(e.target.value),className:"pl-9"})]}),(0,t.jsxs)(d.Select,{value:D,onValueChange:P,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-[180px]",children:(0,t.jsx)(d.SelectValue,{placeholder:"Sort by"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"updated",children:"Recently updated"}),(0,t.jsx)(d.SelectItem,{value:"name",children:"Name A-Z"}),(0,t.jsx)(d.SelectItem,{value:"usage",children:"Most used"})]})]})]})}),0===O.length?(0,t.jsxs)(c.Card,{className:"p-12 text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-50",children:(0,t.jsx)(h.Mail,{className:"h-8 w-8 text-blue-500"})}),(0,t.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"Looks quiet here"}),(0,t.jsx)("p",{className:"mb-4 text-sm text-gray-600",children:"Create your first template to speed up campaigns."}),(0,t.jsx)(s.Button,{className:"gradient-primary text-white",onClick:()=>e(null),children:"Create Template"})]}):(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:O.map((l,r)=>(0,t.jsxs)(c.Card,{className:"group overflow-hidden transition-all hover:shadow-lg animate-in fade-in-0 slide-in-from-bottom-4",style:{animationDelay:`${50*r}ms`},children:[(0,t.jsxs)("div",{className:"relative aspect-video bg-gradient-to-br from-blue-50 to-blue-100",children:["email"===l.type&&l.thumbnail?(0,t.jsx)("img",{src:l.thumbnail||"/placeholder.svg",alt:l.name,className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:"email"===l.type?(0,t.jsx)(h.Mail,{className:"h-12 w-12 text-blue-400"}):(0,t.jsx)(x.MessageSquare,{className:"h-12 w-12 text-green-400"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 transition-all group-hover:bg-black/20"})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-start justify-between gap-2",children:[(0,t.jsx)("h3",{className:"line-clamp-1 font-semibold text-gray-900",children:l.name}),(0,t.jsxs)(u.DropdownMenu,{children:[(0,t.jsx)(u.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(p.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(u.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(u.DropdownMenuItem,{onClick:()=>e(l),children:[(0,t.jsx)(g.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(u.DropdownMenuItem,{onClick:()=>F(l),children:[(0,t.jsx)(v.Copy,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),(0,t.jsxs)(u.DropdownMenuItem,{onClick:()=>R(l.id),className:"text-red-600",children:[(0,t.jsx)(b.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),(0,t.jsx)(m.Badge,{variant:"secondary",className:"email"===l.type?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",children:"email"===l.type?"Email":"SMS"}),(0,t.jsxs)("div",{className:"mt-3 space-y-1 text-xs text-gray-500",children:[(0,t.jsxs)("div",{children:["Updated ",new Date(l.updated_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),(0,t.jsxs)("div",{children:["Used ",l.usage_count,"x"]})]}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",className:"flex-1 bg-transparent",onClick:()=>a(l),children:[(0,t.jsx)(f.Eye,{className:"mr-1 h-3 w-3"}),"Preview"]}),(0,t.jsxs)(s.Button,{size:"sm",className:"gradient-primary flex-1 text-white",onClick:()=>{sessionStorage.setItem("selectedTemplate",JSON.stringify(l)),j.push("/campaigns"),i({title:"Template selected",description:`Opening campaign creator with "${l.name}" template.`})},children:[(0,t.jsx)(N,{className:"mr-1 h-3 w-3"}),"Use Template"]})]})]})]},l.id))})]})}var S=e.i(30374),C=e.i(78917);function T({template:e,open:a,onClose:l}){let i=(0,n.useRouter)();return e?(0,t.jsx)(S.Dialog,{open:a,onOpenChange:l,children:(0,t.jsxs)(S.DialogContent,{className:"max-w-3xl max-h-[90vh] my-4 overflow-hidden p-0 flex flex-col",children:[(0,t.jsx)("div",{className:"px-6 pt-6 pb-4 border-b",children:(0,t.jsx)(S.DialogHeader,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(S.DialogTitle,{children:e.name}),(0,t.jsx)(m.Badge,{variant:"secondary",className:"email"===e.type?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",children:"email"===e.type?"Email":"SMS"})]})})}),(0,t.jsxs)("div",{className:"overflow-y-auto px-6 py-4 space-y-4",children:[(0,t.jsx)("div",{className:"rounded-lg border bg-gray-50 p-6",children:"email"===e.type&&e.htmlContent?(0,t.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.htmlContent}}):(0,t.jsx)("div",{className:"whitespace-pre-wrap text-sm text-gray-700",children:e.content})}),(0,t.jsxs)(s.Button,{className:"gradient-primary w-full text-white",onClick:()=>{i.push(`/campaigns?templateId=${e.id}`),l()},children:[(0,t.jsx)(C.ExternalLink,{className:"mr-2 h-4 w-4"}),"Use in Campaign"]})]})]})}):null}var E=e.i(10708),I=e.i(84762),M=e.i(25959),L=e.i(27341),D=e.i(37727),P=e.i(56909);let A=(0,j.default)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),B=(0,j.default)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);var z=e.i(64659),R=e.i(35501);let F=(0,j.default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),O=(0,j.default)("Mouse",[["rect",{x:"5",y:"2",width:"14",height:"20",rx:"7",key:"11ol66"}],["path",{d:"M12 6v4",key:"16clxf"}]]),V=(0,j.default)("Space",[["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),H=(0,j.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),_=(0,j.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),U=(0,j.default)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var $=e.i(58472);let q=(0,j.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var G=e.i(55900),K=e.i(47163);function Y({template:e,onClose:a,onSuccess:l}){let{toast:i}=(0,w.useToast)(),c=(0,n.useRouter)(),[m,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)("content"),[p,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]),[j,N]=(0,r.useState)(null),[k,S]=(0,r.useState)(null),[C,T]=(0,r.useState)({name:"",subject:"",preheader:"",fromName:"The International Football Group",fromEmail:"info@theinternationalfootballgroup.com",replyTo:!0,recipients:"all",html:"",thumbnail:""});(0,r.useEffect)(()=>{e&&(T({name:e.name||"",subject:e.subject||"",preheader:e.preheader||"",fromName:e.fromName||"The International Football Group",fromEmail:e.fromEmail||"info@theinternationalfootballgroup.com",replyTo:!0,recipients:"all",html:e.htmlContent||e.html||"",thumbnail:e.thumbnail||""}),y(e.blocks||[]))},[e]);let Y=async t=>{if(!C.name||!C.subject)return void i({title:"Validation Error",description:"Please fill in the template name and subject line.",variant:"destructive"});u(!0);try{var a;let s,l,r,n=(a={fromName:C.fromName,fromEmail:C.fromEmail},s=a?.fromName||"The International Football Group",l=a?.fromEmail||"info@theinternationalfootballgroup.com",r=v.map(e=>{switch(e.type){case"image":return`<img src="${e.src}" alt="${e.alt}" style="max-width: 100%; height: auto; display: block;" />`;case"text":return`<p style="font-size: 16px; line-height: 1.6; color: #374151; margin: 16px 0;">${e.value}</p>`;case"button":return`<div style="text-align: center; margin: 24px 0;">
            <a href="${e.url}" style="display: inline-block; background: linear-gradient(to right, #2563eb, #1d4ed8); color: white; padding: 12px 24px; text-decoration: none; border-radius: 8px; font-weight: 500;">
              ${e.label}
            </a>
          </div>`;case"spacer":return'<div style="height: 32px;"></div>';case"divider":return'<hr style="border: none; border-top: 1px solid #e5e7eb; margin: 24px 0;" />';case"video":return`<div style="margin: 24px 0;">
            <a href="${e.url}" style="color: #2563eb;">Watch Video</a>
          </div>`;case"social":let t=e.links.map(e=>`<a href="${e.url}" style="margin: 0 8px; color: #2563eb; text-decoration: none;">${e.platform}</a>`).join("");return`<div style="text-align: center; margin: 24px 0;">${t}</div>`;case"html":return e.code;default:return""}}).join("\n"),`
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Template</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f3f4f6;">
  <div style="max-width: 600px; margin: 0 auto; background-color: white; padding: 40px;">
    <!-- Header -->
    <div style="text-align: center; margin-bottom: 32px;">
      <div style="width: 64px; height: 64px; margin: 0 auto 16px; background: linear-gradient(135deg, #2563eb, #1e40af); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
        <svg viewBox="0 0 24 24" style="width: 32px; height: 32px; fill: white;">
          <circle cx="12" cy="12" r="10" />
        </svg>
      </div>
      <h1 style="margin: 0; font-size: 24px; font-weight: bold; color: #111827;">THE INTERNATIONAL</h1>
      <h2 style="margin: 4px 0 0; font-size: 20px; font-weight: 600; color: #111827;">FOOTBALL GROUP</h2>
    </div>

    <!-- Content Blocks -->
    <div>
      ${r}
    </div>

    <!-- Footer -->
    <div style="margin-top: 40px; padding-top: 24px; border-top: 1px solid #e5e7eb; text-align: center; font-size: 12px; color: #6b7280;">
      ${s} | ${l}
    </div>
  </div>
</body>
</html>
  `.trim()),o={name:C.name,subject:C.subject,preheader:C.preheader,fromName:C.fromName,fromEmail:C.fromEmail,recipientPreview:C.recipients,blocks:v,html:n,htmlContent:n,type:"email",category:"newsletter",content:C.subject,thumbnail:C.thumbnail},d=e?.id?`/api/templates/${e.id}`:"/api/templates",m=e?.id?"PUT":"POST";if((await fetch(d,{method:m,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)"draft"===t?i({title:"Template saved",description:"Your template has been saved successfully."}):(i({title:"Template saved",description:"Your template has been saved and you're being redirected."}),setTimeout(()=>{c.push("/templates")},500));else throw Error("Failed to save")}catch(e){i({title:"Error",description:"Failed to save template. Please try again.",variant:"destructive"})}finally{u(!1)}},X=(e,t)=>{let a=[...v];a[e]=t,y(a)},J=[{icon:R.ImageIcon,label:"Image"},{icon:F,label:"Text"},{icon:O,label:"Button"},{icon:V,label:"Spacer"},{icon:H,label:"Video"},{icon:_,label:"Social"},{icon:U,label:"Divider"},{icon:$.Code,label:"HTML"}];return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-gray-50",children:[(0,t.jsxs)("div",{className:"gradient-primary flex items-center justify-between border-b px-6 py-3 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/10",children:(0,t.jsx)(D.X,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"text-white",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:e?"Edit Template":"New Email Template"}),(0,t.jsx)("div",{className:"text-xs text-blue-100",children:C.name||"Untitled Template"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:(0,t.jsx)(A,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:(0,t.jsx)(B,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"mx-2 h-6 w-px bg-white/30"}),(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",onClick:()=>Y("draft"),className:"text-white hover:bg-white/10",disabled:m,children:[(0,t.jsx)(P.Save,{className:"mr-2 h-4 w-4"}),"Save Draft"]}),(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:[(0,t.jsx)(f.Eye,{className:"mr-2 h-4 w-4"}),"Preview"]}),(0,t.jsx)(s.Button,{size:"sm",className:"bg-white text-blue-600 shadow-md hover:bg-blue-50",onClick:()=>Y("exit"),disabled:m,children:m?"Saving...":"Save & Exit"})]})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,t.jsx)("div",{className:"w-[420px] overflow-y-auto border-r bg-white p-6",children:(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"template-name",className:"text-sm font-medium text-gray-700",children:"Template Name *"}),(0,t.jsx)(o.Input,{id:"template-name",value:C.name,onChange:e=>T({...C,name:e.target.value}),placeholder:"e.g., 2025/2026 Newsletter",className:"mt-1.5"})]}),(0,t.jsx)("div",{className:"h-px bg-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"subject",className:"text-sm font-medium text-gray-700",children:"Subject Line *"}),(0,t.jsx)(o.Input,{id:"subject",value:C.subject,onChange:e=>T({...C,subject:e.target.value}),placeholder:"e.g., 2025/2026 Newsletter â€“ IFG Macclesfield FC",className:"mt-1.5"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"preheader",className:"text-sm font-medium text-gray-700",children:"Preheader"}),(0,t.jsx)(o.Input,{id:"preheader",value:C.preheader,onChange:e=>T({...C,preheader:e.target.value}),placeholder:"Join us for 2026!",className:"mt-1.5"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"If this field is left blank the first line of your email will display."})]}),(0,t.jsx)("div",{className:"h-px bg-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"from-name",className:"text-sm font-medium text-gray-700",children:"From Name *"}),(0,t.jsx)(o.Input,{id:"from-name",value:C.fromName,onChange:e=>T({...C,fromName:e.target.value}),className:"mt-1.5"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{htmlFor:"from-email",className:"text-sm font-medium text-gray-700",children:"From Email *"}),(0,t.jsx)(o.Input,{id:"from-email",type:"email",value:C.fromEmail,onChange:e=>T({...C,fromEmail:e.target.value}),className:"mt-1.5"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)(M.Checkbox,{id:"reply-to",checked:C.replyTo,onCheckedChange:e=>T({...C,replyTo:e})}),(0,t.jsx)(E.Label,{htmlFor:"reply-to",className:"cursor-pointer text-sm font-normal text-gray-600",children:"Use this email as my reply-to address"})]})]}),(0,t.jsx)("div",{className:"h-px bg-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-sm font-medium text-gray-700",children:"Recipient Preview"}),(0,t.jsx)("p",{className:"mb-2 text-xs text-gray-500",children:"Select the recipients you would like to receive this campaign."}),(0,t.jsxs)(d.Select,{value:C.recipients,onValueChange:e=>T({...C,recipients:e}),children:[(0,t.jsx)(d.SelectTrigger,{className:"mt-1.5",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"ALL CONTACTS - EVERYONE"}),(0,t.jsx)(d.SelectItem,{value:"programme",children:"By Programme"}),(0,t.jsx)(d.SelectItem,{value:"recruiter",children:"By Recruiter"}),(0,t.jsx)(d.SelectItem,{value:"status",children:"By Status"})]})]})]}),(0,t.jsx)("div",{className:"h-px bg-gray-200"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-sm font-medium text-gray-700",children:"Thumbnail Preview"}),(0,t.jsx)("div",{className:"mt-2 aspect-video overflow-hidden rounded-lg border bg-gray-50",children:C.thumbnail?(0,t.jsx)("img",{src:C.thumbnail||"/placeholder.svg",alt:"Preview",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-gray-400",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(R.ImageIcon,{className:"mx-auto mb-2 h-12 w-12"}),(0,t.jsx)("p",{className:"text-xs",children:"Add content to see preview"})]})})})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(s.Button,{variant:"outline",className:"flex-1 bg-transparent",onClick:a,children:"Cancel"}),(0,t.jsx)(s.Button,{className:"gradient-primary flex-1 text-white",onClick:()=>Y("exit"),disabled:m,children:m?"Saving...":"Save & Exit"})]})]})}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b bg-white px-4 py-2",children:[(0,t.jsx)(L.Tabs,{value:h,onValueChange:e=>x(e),className:"w-auto",children:(0,t.jsxs)(L.TabsList,{children:[(0,t.jsx)(L.TabsTrigger,{value:"content",children:"Content"}),(0,t.jsx)(L.TabsTrigger,{value:"settings",children:"Global Settings"})]})}),(0,t.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>g(!p),className:(0,K.cn)("gap-2",p&&"bg-blue-50 text-blue-600"),children:[(0,t.jsx)($.Code,{className:"h-4 w-4"}),p?"Visual Editor":"HTML"]})]}),(0,t.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:["content"===h&&!p&&(0,t.jsxs)("div",{className:"w-64 overflow-y-auto border-r bg-white p-4",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Blocks"}),(0,t.jsx)(z.ChevronDown,{className:"h-4 w-4 text-gray-400"})]}),(0,t.jsx)("div",{className:"space-y-1",children:J.map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{let t;switch(e){case"Image":t={type:"image",src:"/placeholder.svg?height=300&width=600",alt:""};break;case"Text":t={type:"text",value:"Your text here..."};break;case"Button":t={type:"button",label:"Call to action",url:"#"};break;case"Spacer":t={type:"spacer"};break;case"Video":t={type:"video",url:""};break;case"Social":t={type:"social",links:[]};break;case"Divider":t={type:"divider"};break;case"HTML":t={type:"html",code:"<p>Your HTML</p>"};break;default:return}y([...v,t]),i({title:"Block added",description:`${e} block added to canvas`})})(e.label),className:"flex w-full items-center gap-3 rounded-lg border border-transparent px-3 py-2.5 text-left text-sm transition-colors hover:border-blue-200 hover:bg-blue-50",children:[(0,t.jsx)(e.icon,{className:"h-5 w-5 text-gray-600"}),(0,t.jsx)("span",{className:"text-gray-700",children:e.label})]},e.label))}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"mb-3 text-sm font-semibold text-gray-900",children:"Saved Modules"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Save frequently used blocks to reuse later."})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"mx-auto max-w-[600px]",children:[!p&&(C.subject||C.preheader)&&(0,t.jsxs)("div",{className:"mb-4 rounded-lg border bg-white p-4 shadow-sm",children:[C.subject&&(0,t.jsxs)("div",{className:"mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Subject: "}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:C.subject})]}),C.preheader&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500",children:"Preheader: "}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:C.preheader})]})]}),p?(0,t.jsx)("div",{className:"min-h-[600px] rounded-lg border bg-white p-4",children:(0,t.jsx)(I.Textarea,{value:C.html,onChange:e=>T({...C,html:e.target.value}),placeholder:"<html><body>Enter your HTML template here...</body></html>",className:"min-h-[560px] font-mono text-sm"})}):(0,t.jsx)("div",{className:"min-h-[600px] rounded-lg border bg-white shadow-sm",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-6 text-center",children:[(0,t.jsx)("div",{className:"mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-gradient-to-br from-blue-600 to-blue-800",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-white",fill:"currentColor",children:(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"THE INTERNATIONAL"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"FOOTBALL GROUP"})]}),(0,t.jsx)("div",{className:"space-y-4",children:v.length>0?v.map((e,a)=>{let l,i;return(0,t.jsx)("div",{children:(l=k===a,i=j===a,(0,t.jsxs)("div",{className:"group relative",onMouseEnter:()=>S(a),onMouseLeave:()=>S(null),children:[(0,t.jsxs)("div",{className:(0,K.cn)("relative",i&&"ring-2 ring-blue-500 ring-offset-2"),children:["image"===e.type&&(0,t.jsx)("div",{className:"overflow-hidden rounded-lg",children:(0,t.jsx)("img",{src:e.src||"/placeholder.svg",alt:e.alt,className:"h-auto w-full"})}),"text"===e.type&&(0,t.jsx)("div",{className:"prose max-w-none",children:(0,t.jsx)("p",{className:"text-gray-700",children:e.value})}),"button"===e.type&&(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("a",{href:e.url,className:"inline-block rounded-lg bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-3 text-white transition-all hover:from-blue-700 hover:to-blue-800",children:e.label})}),"spacer"===e.type&&(0,t.jsx)("div",{className:"h-8"}),"divider"===e.type&&(0,t.jsx)("div",{className:"my-6 h-px bg-gray-200"}),"html"===e.type&&(0,t.jsx)("div",{className:"rounded bg-gray-50 p-4",children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.code}})})]}),l&&!i&&(0,t.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1 rounded-lg bg-white p-1 shadow-lg",children:[(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>N(a),children:(0,t.jsx)(q,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>(e=>{if(0===e)return;let t=[...v];[t[e-1],t[e]]=[t[e],t[e-1]],y(t)})(a),disabled:0===a,children:(0,t.jsx)(G.ChevronUp,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0",onClick:()=>(e=>{if(e===v.length-1)return;let t=[...v];[t[e],t[e+1]]=[t[e+1],t[e]],y(t)})(a),disabled:a===v.length-1,children:(0,t.jsx)(z.ChevronDown,{className:"h-3.5 w-3.5"})}),(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",className:"h-7 w-7 p-0 text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>{y(v.filter((e,t)=>t!==a)),N(null)},children:(0,t.jsx)(b.Trash2,{className:"h-3.5 w-3.5"})})]}),i&&(0,t.jsxs)("div",{className:"mt-2 rounded-lg border bg-white p-4 shadow-lg",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold",children:["Edit ",e.type]}),(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:()=>N(null),children:(0,t.jsx)(D.X,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:["image"===e.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"Image URL"}),(0,t.jsx)(o.Input,{value:e.src,onChange:t=>X(a,{...e,src:t.target.value}),placeholder:"https://...",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"Alt Text"}),(0,t.jsx)(o.Input,{value:e.alt,onChange:t=>X(a,{...e,alt:t.target.value}),placeholder:"Describe the image",className:"mt-1"})]})]}),"text"===e.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"Content"}),(0,t.jsx)(I.Textarea,{value:e.value,onChange:t=>X(a,{...e,value:t.target.value}),placeholder:"Enter your text...",className:"mt-1",rows:4})]}),"button"===e.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"Button Label"}),(0,t.jsx)(o.Input,{value:e.label,onChange:t=>X(a,{...e,label:t.target.value}),placeholder:"Click here",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"Link URL"}),(0,t.jsx)(o.Input,{value:e.url,onChange:t=>X(a,{...e,url:t.target.value}),placeholder:"https://...",className:"mt-1"})]})]}),"html"===e.type&&(0,t.jsxs)("div",{children:[(0,t.jsx)(E.Label,{className:"text-xs",children:"HTML Code"}),(0,t.jsx)(I.Textarea,{value:e.code,onChange:t=>X(a,{...e,code:t.target.value}),placeholder:"<p>Your HTML</p>",className:"mt-1 font-mono text-xs",rows:6})]})]}),(0,t.jsx)(s.Button,{size:"sm",className:"mt-3 w-full",onClick:()=>N(null),children:"Done"})]})]},a))},a)}):(0,t.jsxs)("div",{className:"py-12 text-center text-gray-400",children:[(0,t.jsx)(R.ImageIcon,{className:"mx-auto mb-3 h-12 w-12"}),(0,t.jsx)("p",{className:"text-sm",children:"Click blocks on the left to start building your email"})]})}),(0,t.jsxs)("div",{className:"mt-8 border-t pt-6 text-center text-xs text-gray-500",children:[C.fromName||"The International Football Group"," |"," ",C.fromEmail||"info@theinternationalfootballgroup.com"]})]})})]})})]})]})]})]})}var X=e.i(20755);function J(){let[e,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(null),[x,p]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(0,X.createClient)().auth.getUser().then(({data:{user:e}})=>{p(e)})},[]),e)?(0,t.jsx)(Y,{template:c,onClose:()=>{n(!1),o(null)},onSuccess:()=>{n(!1),o(null),window.location.reload()}}):x?(0,t.jsxs)(a.AppLayout,{user:x,title:"Templates",children:[(0,t.jsx)("div",{className:"gradient-primary mb-6 flex h-[72px] items-center rounded-2xl px-6 shadow-[0_2px_6px_rgba(0,0,0,0.06)]",children:(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[(0,t.jsx)("p",{className:"text-base text-white",style:{fontFamily:"Inter, sans-serif",fontWeight:400},children:"Create, save, and reuse email and SMS templates for campaigns."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(s.Button,{variant:"outline",className:"gap-2 border-white/30 bg-white/10 text-white hover:bg-white/20",children:[(0,t.jsx)(i.Upload,{className:"h-4 w-4"}),"Import HTML"]}),(0,t.jsxs)(s.Button,{className:"gap-2 bg-white text-blue-600 shadow-md hover:bg-blue-50",onClick:()=>{o(null),n(!0)},children:[(0,t.jsx)(l.Plus,{className:"h-4 w-4"}),"New Template"]})]})]})}),(0,t.jsx)(k,{onEdit:e=>{o(e),n(!0)},onPreview:e=>{h(e),m(!0)}}),(0,t.jsx)(T,{template:u,open:d,onClose:()=>{m(!1),h(null)}})]}):null}e.s(["default",()=>J],49143)}]);