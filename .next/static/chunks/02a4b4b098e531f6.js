(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66514,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),l=e.i(70065),r=e.i(23750),i=e.i(67881),n=e.i(62870),c=e.i(47627),o=e.i(89954),d=e.i(94179),h=e.i(25959),x=e.i(73375),m=e.i(63059),g=e.i(32095),p=e.i(30374),u=e.i(10708),b=e.i(7233);function j({open:e,onClose:a,onSubmit:l,action:c,lists:o}){let[d,h]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[g,j]=(0,s.useState)(!1),y=async()=>{if(g&&x){let e=await fetch("/api/lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x,type:"static"})});l((await e.json()).id.toString())}else d&&l(d);h(""),m(""),j(!1),a()};return(0,t.jsx)(p.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-[440px]",children:[(0,t.jsx)(p.DialogHeader,{children:(0,t.jsx)(p.DialogTitle,{children:"add"===c?"Add to List":"Remove from List"})}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:g?(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"New list name"}),(0,t.jsx)(r.Input,{value:x,onChange:e=>m(e.target.value),placeholder:"Enter list name",className:"mt-2"}),(0,t.jsx)(i.Button,{variant:"ghost",onClick:()=>j(!1),className:"mt-2 text-sm",children:"Choose existing list instead"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Select list"}),(0,t.jsxs)(n.Select,{value:d,onValueChange:h,children:[(0,t.jsx)(n.SelectTrigger,{className:"mt-2",children:(0,t.jsx)(n.SelectValue,{placeholder:"Choose a list"})}),(0,t.jsx)(n.SelectContent,{children:o.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),"add"===c&&(0,t.jsxs)(i.Button,{variant:"outline",onClick:()=>j(!0),className:"w-full gap-2",children:[(0,t.jsx)(b.Plus,{className:"h-4 w-4"}),"Create new list"]})]})}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:y,disabled:!d&&!x,className:"bg-gradient-to-r from-blue-600 to-blue-700",children:"add"===c?"Add to list":"Remove from list"})]})]})})}var y=e.i(75254);let f=(0,y.default)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]),w=(0,y.default)("ListMinus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var S=e.i(40160),C=e.i(37727);function v({selectedCount:e,onAddToList:s,onRemoveFromList:a,onExportSelected:r,onClearSelection:n}){return 0===e?null:(0,t.jsx)(l.Card,{className:"mb-4 bg-blue-50/50 border-blue-200/60 px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[e," contact",1!==e?"s":""," selected"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{onClick:s,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,t.jsx)(f,{className:"h-3.5 w-3.5"}),"Add to list"]}),(0,t.jsxs)(i.Button,{onClick:a,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,t.jsx)(w,{className:"h-3.5 w-3.5"}),"Remove from list"]}),(0,t.jsxs)(i.Button,{onClick:r,size:"sm",className:"gap-1.5 h-9 bg-white hover:bg-gray-50 border border-gray-300 text-gray-700 shadow-sm",children:[(0,t.jsx)(S.Download,{className:"h-3.5 w-3.5"}),"Export"]})]})]}),(0,t.jsxs)(i.Button,{onClick:n,variant:"ghost",size:"sm",className:"h-9 text-gray-600 hover:text-gray-900 hover:bg-white/60",children:[(0,t.jsx)(C.X,{className:"h-4 w-4 mr-1"}),"Clear selection"]})]})})}var N=e.i(20682);function T(){let e=(0,a.useSearchParams)(),p=(0,a.useRouter)(),{toast:u}=(0,N.useToast)(),[b,y]=(0,s.useState)([]),[f,w]=(0,s.useState)([]),[S,C]=(0,s.useState)([]),[T,k]=(0,s.useState)([]),[B,A]=(0,s.useState)(null),[F,L]=(0,s.useState)(!1),[E,I]=(0,s.useState)(new Set),[O,D]=(0,s.useState)(!1),[H,R]=(0,s.useState)("add"),[P,$]=(0,s.useState)(""),[M,W]=(0,s.useState)("all"),[z,V]=(0,s.useState)("all"),[U,G]=(0,s.useState)("all"),[J,K]=(0,s.useState)("all"),[q,Q]=(0,s.useState)("all"),[X,Y]=(0,s.useState)("all"),[_,Z]=(0,s.useState)(1),[ee,et]=(0,s.useState)(0),[es]=(0,s.useState)(25),[ea,el]=(0,s.useState)(!1);(0,s.useEffect)(()=>{er(),ei(),en()},[]),(0,s.useEffect)(()=>{let t=e.get("listId");t?Q(t):Q("all")},[e]),(0,s.useEffect)(()=>{ec()},[P,M,z,U,J,q,X,_]);let er=async()=>{let e=await fetch("/api/settings/programmes");w(await e.json())},ei=async()=>{let e=await fetch("/api/settings/recruiters");C(await e.json())},en=async()=>{try{let e=await fetch("/api/lists");if(!e.ok){console.log("[v0] Lists table not available yet"),k([]);return}let t=await e.json();k(Array.isArray(t)?t:[])}catch(e){console.log("[v0] Error fetching lists:",e),k([])}},ec=async()=>{el(!0);try{let e=new URLSearchParams({page:_.toString(),pageSize:es.toString(),...P&&{search:P},..."all"!==M&&{programme:M},..."all"!==z&&{recruiter:z},..."all"!==U&&{tag:U},..."all"!==J&&{status:J},..."all"!==q&&{listId:q},..."all"!==X&&{country:X}}),t=await fetch(`/api/contacts?${e}`);if(!t.ok){console.log("[v0] Error fetching contacts:",t.statusText),y([]),et(0),el(!1);return}let s=await t.json();y(Array.isArray(s.data)?s.data:[]),et(s.total||0)}catch(e){console.log("[v0] Error fetching contacts:",e),y([]),et(0)}el(!1)},eo=e=>{A(e),L(!0)},ed=async e=>{try{(await fetch("add"===H?"/api/lists/add-contacts":"/api/lists/remove-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:e,contactIds:Array.from(E)})})).ok&&(u({title:"Success",description:`${E.size} contacts ${"add"===H?"added to":"removed from"} list`}),I(new Set),ec())}catch(e){u({title:"Error",description:"Failed to update list",variant:"destructive"})}},eh=async()=>{let e=Array.from(E).join(",");window.location.href=`/api/contacts/export?ids=${e}`,u({title:"Export started",description:`Exporting ${E.size} contacts to CSV`})},ex=Math.ceil(ee/es),em=(_-1)*es+1,eg=Math.min(_*es,ee),ep=Array.from(new Set(b.flatMap(e=>e.tags||[]))),eu=Array.from(new Set(b.map(e=>e.country).filter(Boolean)));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Card,{className:"mb-6 bg-[#f9fafc] p-6 border border-gray-200",style:{boxShadow:"0 2px 6px rgba(0,0,0,0.06)"},children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(r.Input,{placeholder:"Search name or email...",value:P,onChange:e=>{$(e.target.value),Z(1)},className:"bg-white h-10"})}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 items-center",children:[(0,t.jsxs)(n.Select,{value:M,onValueChange:e=>{W(e),Z(1)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[170px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Programme"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Programmes"}),f.map(e=>(0,t.jsx)(n.SelectItem,{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)(n.Select,{value:U,onValueChange:e=>{G(e),Z(1)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Tag"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Tags"}),ep.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.Select,{value:z,onValueChange:e=>{V(e),Z(1)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[160px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Recruiter"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Recruiters"}),S.map(e=>(0,t.jsx)(n.SelectItem,{value:e.name,children:e.name},e.id))]})]}),(0,t.jsxs)(n.Select,{value:X,onValueChange:e=>{Y(e),Z(1)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[150px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Country"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Countries"}),eu.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,t.jsxs)(n.Select,{value:J,onValueChange:e=>{K(e),Z(1)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(n.SelectItem,{value:"contacted",children:"Contacted"}),(0,t.jsx)(n.SelectItem,{value:"pipeline",children:"In Pipeline"}),(0,t.jsx)(n.SelectItem,{value:"interview",children:"Interview"}),(0,t.jsx)(n.SelectItem,{value:"signed",children:"Signed"})]})]}),(0,t.jsxs)(n.Select,{value:q,onValueChange:t=>{Q(t),Z(1);let s=new URLSearchParams(e.toString());s.set("tab","contacts"),"all"===t?s.delete("listId"):s.set("listId",t),p.push(`/contacts?${s.toString()}`)},children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-white h-10 w-[140px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"List"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Lists"}),T.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>{$(""),W("all"),V("all"),G("all"),K("all"),Q("all"),Y("all"),Z(1)},className:"bg-white h-10 px-5",children:"Clear filters"})]})]})}),(0,t.jsx)(v,{selectedCount:E.size,onAddToList:()=>{R("add"),D(!0)},onRemoveFromList:()=>{R("remove"),D(!0)},onExportSelected:eh,onClearSelection:()=>I(new Set)}),(0,t.jsxs)(l.Card,{className:"bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(c.Table,{children:[(0,t.jsx)(c.TableHeader,{children:(0,t.jsxs)(c.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,t.jsx)(c.TableHead,{className:"w-12 pl-6",children:(0,t.jsx)(h.Checkbox,{checked:E.size===b.length&&b.length>0,onCheckedChange:e=>{e?I(new Set(b.map(e=>e.id))):I(new Set)}})}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Name"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Email"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Phone"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Programme"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Tags"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Lists"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Recruiter"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Date Created"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Status"})]})}),(0,t.jsx)(c.TableBody,{children:ea?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:10,className:"text-center py-8 text-gray-500",children:"Loading contacts..."})}):0===b.length?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:10,className:"text-center py-8",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"No contacts found"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Try changing your filters."})]})})}):b.map((e,s)=>{let a;return(0,t.jsxs)(c.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] border-b border-[#E6E8F0] ${s%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:[(0,t.jsx)(c.TableCell,{className:"pl-6",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(h.Checkbox,{checked:E.has(e.id),onCheckedChange:t=>{var s;let a;return s=e.id,a=new Set(E),void(t?a.add(s):a.delete(s),I(a))}})}),(0,t.jsx)(c.TableCell,{className:"font-medium",onClick:()=>eo(e),children:e.name}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:e.email}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:e.phone}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:(0,t.jsxs)(d.Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 font-medium gap-1.5",children:[(0,t.jsx)(g.GraduationCap,{className:"h-3.5 w-3.5"}),e.programme]})}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:(0,t.jsxs)("div",{className:"flex gap-1 flex-wrap max-w-[200px]",children:[e.tags&&e.tags.length>0?e.tags.slice(0,2).map((e,s)=>{let a;return(0,t.jsx)(d.Badge,{className:`${(a=["bg-blue-100 text-blue-700 border-blue-200","bg-purple-100 text-purple-700 border-purple-200","bg-green-100 text-green-700 border-green-200","bg-amber-100 text-amber-700 border-amber-200","bg-pink-100 text-pink-700 border-pink-200","bg-cyan-100 text-cyan-700 border-cyan-200"])[e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%a.length]} border text-xs px-2 py-0.5`,children:e},s)}):(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"–"}),e.tags&&e.tags.length>2&&(0,t.jsxs)(d.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",e.tags.length-2]})]})}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:(0,t.jsx)("div",{className:"flex gap-1 flex-wrap max-w-[150px]",children:e.lists&&e.lists.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:e.lists[0]}),e.lists.length>1&&(0,t.jsxs)(d.Badge,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",e.lists.length-1]})]}):(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"–"})})}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:(0,t.jsx)(d.Badge,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-300",children:e.recruiter})}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:new Date(e.date_created).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),(0,t.jsx)(c.TableCell,{onClick:()=>eo(e),children:(0,t.jsx)(d.Badge,{className:`${(a=e.status.toLowerCase()).includes("pipeline")||a.includes("in pipeline")?"bg-blue-100 text-blue-700 border-blue-200 hover:bg-blue-200 transition-colors":a.includes("contact")?"bg-amber-100 text-amber-700 border-amber-200 hover:bg-amber-200 transition-colors":a.includes("sign")?"bg-green-100 text-green-700 border-green-200 hover:bg-green-200 transition-colors":a.includes("interview")?"bg-purple-100 text-purple-700 border-purple-200 hover:bg-purple-200 transition-colors":"bg-gray-100 text-gray-700 border-gray-200 hover:bg-gray-200 transition-colors"} border font-medium`,children:e.status})})]},e.id)})})]})}),b.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-t bg-gray-50 px-6 py-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",em," to ",eg," of ",ee.toLocaleString()," contacts"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Z(_-1),disabled:1===_,children:[(0,t.jsx)(x.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",_," of ",ex]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>Z(_+1),disabled:_>=ex,children:["Next",(0,t.jsx)(m.ChevronRight,{className:"h-4 w-4"})]})]})]})]}),B&&(0,t.jsx)(o.PlayerDrawer,{player:B,open:F,onClose:()=>L(!1)}),(0,t.jsx)(j,{open:O,onClose:()=>D(!1),onSubmit:ed,action:H,lists:T})]})}var k=e.i(23585),B=e.i(63415),A=e.i(84762);function F({open:e,initialList:a,onClose:l,onSaved:n}){let{toast:c}=(0,N.useToast)(),[o,d]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[m,g]=(0,s.useState)("STATIC"),[b,j]=(0,s.useState)(!1),[y,f]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&(a?(d(a.name),x(a.description||""),g(a.type)):(d(""),x(""),g("STATIC")),f(""))},[e,a]);let w=async()=>{if(!o.trim())return void f("List name is required");f(""),j(!0);try{let e=a?`/api/lists/${a.id}`:"/api/lists",t=a?"PUT":"POST",s={name:o.trim(),description:h.trim()||void 0,type:m};"SMART"===m&&(s.filtersJson={});let l=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(l.ok)c({title:a?"List updated":"List created",description:`${o} has been ${a?"updated":"created"} successfully`}),n();else{let e=await l.json();c({title:"Error",description:e.error||`Failed to ${a?"update":"create"} list`,variant:"destructive"})}}catch(e){c({title:"Error",description:`Failed to ${a?"update":"create"} list`,variant:"destructive"})}finally{j(!1)}};return(0,t.jsx)(p.Dialog,{open:e,onOpenChange:l,children:(0,t.jsxs)(p.DialogContent,{className:"sm:max-w-[500px] bg-white shadow-xl",children:[(0,t.jsx)(p.DialogHeader,{className:"border-b pb-5",children:(0,t.jsx)(p.DialogTitle,{className:"text-[26px] font-semibold tracking-tight text-gray-900",children:a?"Edit List":"Create New List"})}),(0,t.jsxs)("div",{className:"space-y-6 py-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"list-name",className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"List name"}),(0,t.jsx)(r.Input,{id:"list-name",value:o,onChange:e=>{d(e.target.value),y&&f("")},placeholder:"e.g. Q1 2025 Prospects",className:`h-11 ${y?"border-red-500 focus-visible:ring-red-500":""}`}),y&&(0,t.jsx)("p",{className:"text-sm text-red-600 mt-1",children:y})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"list-description",className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"Description (optional)"}),(0,t.jsx)(A.Textarea,{id:"list-description",value:h,onChange:e=>x(e.target.value),placeholder:"What is this list for?",rows:3,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(u.Label,{className:"text-[13px] font-medium text-gray-700 uppercase tracking-wide",children:"List type"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>g("STATIC"),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all text-left ${"STATIC"===m?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[(0,t.jsx)("div",{className:"font-medium text-[15px] text-gray-900",children:"Static"}),(0,t.jsx)("div",{className:"text-[13px] text-gray-500 mt-0.5",children:"Manually add and remove contacts"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>g("SMART"),className:`flex-1 px-4 py-3 rounded-lg border-2 transition-all text-left ${"SMART"===m?"border-purple-500 bg-purple-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[(0,t.jsx)("div",{className:"font-medium text-[15px] text-gray-900",children:"Smart"}),(0,t.jsx)("div",{className:"text-[13px] text-gray-500 mt-0.5",children:"Auto-include contacts matching filters"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:l,className:"px-6",children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:w,disabled:!o.trim()||b,className:"px-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:b?a?"Updating...":"Creating...":a?"Save List":"Create List"})]})]})})}var L=e.i(71689),E=e.i(27612);let I=(0,y.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function O({list:e,onBack:a}){let{toast:r}=(0,N.useToast)(),[n,x]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[u,j]=(0,s.useState)(!1),[y,f]=(0,s.useState)(new Set),[w,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v()},[e.id]);let v=async()=>{C(!0);let t=await fetch(`/api/lists/${e.id}/contacts`);x(await t.json()),C(!1)},T=async()=>{!confirm(`Are you sure you want to delete "${e.name}"?`)||(await fetch(`/api/lists/${e.id}`,{method:"DELETE"})).ok&&(r({title:"List deleted",description:"The list has been removed"}),a())},k=async()=>{0===y.size||(await fetch("/api/lists/remove-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({listId:e.id.toString(),contactIds:Array.from(y)})})).ok&&(r({title:"Contacts removed",description:`${y.size} contacts removed from list`}),f(new Set),v())};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)(i.Button,{variant:"ghost",onClick:a,className:"gap-2 mb-4 -ml-2",children:[(0,t.jsx)(L.ArrowLeft,{className:"h-4 w-4"}),"Back to lists"]}),(0,t.jsx)(l.Card,{className:"p-6 bg-white",children:(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:e.name}),(0,t.jsx)(d.Badge,{className:"smart"===e.type?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",children:e.type})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"flex gap-4 mt-3 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:[e.contactCount.toLocaleString()," contacts"]}),(0,t.jsxs)("span",{children:["Created"," ",new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.Button,{onClick:()=>{window.location.href=`/api/lists/${e.id}/export`,r({title:"Export started",description:"Exporting list contacts to CSV"})},variant:"outline",className:"gap-2",children:[(0,t.jsx)(S.Download,{className:"h-4 w-4"}),"Export CSV"]}),"smart"===e.type&&(0,t.jsxs)(i.Button,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(I,{className:"h-4 w-4"}),"Edit filters"]}),"static"===e.type&&(0,t.jsxs)(i.Button,{variant:"outline",className:"gap-2",children:[(0,t.jsx)(b.Plus,{className:"h-4 w-4"}),"Add contacts"]}),(0,t.jsxs)(i.Button,{variant:"outline",className:"gap-2",onClick:T,children:[(0,t.jsx)(E.Trash2,{className:"h-4 w-4"}),"Delete"]})]})]})})]}),y.size>0&&"static"===e.type&&(0,t.jsx)(l.Card,{className:"mb-4 p-4 bg-blue-50 border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[y.size," contacts selected"]}),(0,t.jsxs)(i.Button,{onClick:k,size:"sm",variant:"outline",className:"gap-2",children:[(0,t.jsx)(E.Trash2,{className:"h-3.5 w-3.5"}),"Remove from list"]})]})}),(0,t.jsx)(l.Card,{className:"bg-white shadow-sm",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(c.Table,{children:[(0,t.jsx)(c.TableHeader,{children:(0,t.jsxs)(c.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:["static"===e.type&&(0,t.jsx)(c.TableHead,{className:"w-12 pl-6",children:(0,t.jsx)(h.Checkbox,{checked:y.size===n.length&&n.length>0,onCheckedChange:e=>{e?f(new Set(n.map(e=>e.id))):f(new Set)}})}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Name"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Email"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Phone"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Programme"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Recruiter"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Status"})]})}),(0,t.jsx)(c.TableBody,{children:w?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Loading contacts..."})}):0===n.length?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:7,className:"text-center py-12",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"No contacts in this list"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Add contacts to get started."})]})})}):n.map((s,a)=>{let l;return(0,t.jsxs)(c.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] ${a%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:["static"===e.type&&(0,t.jsx)(c.TableCell,{className:"pl-6",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(h.Checkbox,{checked:y.has(s.id),onCheckedChange:e=>{var t;let a;return t=s.id,a=new Set(y),void(e?a.add(t):a.delete(t),f(a))}})}),(0,t.jsx)(c.TableCell,{className:"font-medium",onClick:()=>{p(s),j(!0)},children:s.name}),(0,t.jsx)(c.TableCell,{onClick:()=>{p(s),j(!0)},children:s.email}),(0,t.jsx)(c.TableCell,{onClick:()=>{p(s),j(!0)},children:s.phone}),(0,t.jsx)(c.TableCell,{onClick:()=>{p(s),j(!0)},children:(0,t.jsxs)(d.Badge,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0 font-medium gap-1.5",children:[(0,t.jsx)(g.GraduationCap,{className:"h-3.5 w-3.5"}),s.programme]})}),(0,t.jsx)(c.TableCell,{onClick:()=>{p(s),j(!0)},children:(0,t.jsx)(d.Badge,{variant:"outline",className:"bg-gray-100 text-gray-700 border-gray-300",children:s.recruiter})}),(0,t.jsx)(c.TableCell,{onClick:()=>{p(s),j(!0)},children:(0,t.jsx)(d.Badge,{className:`${(l=s.status.toLowerCase()).includes("pipeline")?"bg-blue-100 text-blue-700 border-blue-200":l.includes("contact")?"bg-amber-100 text-amber-700 border-amber-200":l.includes("sign")?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200"} border font-medium`,children:s.status})})]},s.id)})})]})})}),m&&(0,t.jsx)(o.PlayerDrawer,{player:m,open:u,onClose:()=>j(!1)})]})}function D(){let e=(0,a.useRouter)(),{toast:r}=(0,N.useToast)(),[n,o]=(0,s.useState)([]),[h,x]=(0,s.useState)(null),[m,g]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1),[j,y]=(0,s.useState)(null),[f,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{C()},[]);let C=async()=>{u(!0);try{let e=await fetch("/api/lists");if(!e.ok){console.error("[v0] Failed to fetch lists:",e.status),o([]);return}let t=await e.json();o(Array.isArray(t)?t:[])}catch(e){console.error("[v0] Error fetching lists:",e),o([])}finally{u(!1)}},v=async e=>{window.location.href=`/api/lists/${e}/export`,r({title:"Export started",description:"Exporting list to CSV"})},T=async e=>{!confirm("Are you sure you want to delete this list?")||(await fetch(`/api/lists/${e}`,{method:"DELETE"})).ok&&(r({title:"List deleted",description:"The list has been removed"}),C())},A=t=>{e.push(`/contacts?tab=contacts&listId=${t.id}`)};return h?(0,t.jsx)(O,{list:h,onBack:()=>{x(null),C()}}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Lists"}),(0,t.jsxs)(i.Button,{onClick:()=>g(!0),className:"gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800",children:[(0,t.jsx)(b.Plus,{className:"h-4 w-4"}),"Create List"]})]}),(0,t.jsx)(l.Card,{className:"bg-white shadow-sm",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(c.Table,{children:[(0,t.jsx)(c.TableHeader,{children:(0,t.jsxs)(c.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"List Name"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Type"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Contacts"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Created"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Last Exported"}),(0,t.jsx)(c.TableHead,{style:{fontFamily:"'Oswald', sans-serif",fontWeight:500,letterSpacing:"0.6px",color:"#0A47B1"},children:"Actions"})]})}),(0,t.jsx)(c.TableBody,{children:p?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Loading lists..."})}):0===n.length?(0,t.jsx)(c.TableRow,{children:(0,t.jsx)(c.TableCell,{colSpan:6,className:"text-center py-12",children:(0,t.jsxs)("div",{className:"text-gray-500",children:[(0,t.jsx)("p",{className:"text-lg font-medium",children:"No lists yet"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Create your first list to get started."}),(0,t.jsxs)(i.Button,{onClick:()=>g(!0),className:"mt-4 gap-2 bg-gradient-to-r from-blue-600 to-blue-700",children:[(0,t.jsx)(b.Plus,{className:"h-4 w-4"}),"Create List"]})]})})}):n.map((e,s)=>(0,t.jsxs)(c.TableRow,{className:`cursor-pointer transition-colors hover:bg-[#F8FAFF] ${s%2==0?"bg-white":"bg-[#f9fafb]"}`,style:{fontFamily:"Inter, sans-serif",fontWeight:400,color:"#1E1E1E"},children:[(0,t.jsx)(c.TableCell,{className:"font-medium",onClick:()=>A(e),children:e.name}),(0,t.jsx)(c.TableCell,{onClick:()=>A(e),children:(0,t.jsx)(d.Badge,{className:"smart"===e.type?"bg-purple-100 text-purple-700 border-purple-200":"bg-blue-100 text-blue-700 border-blue-200",children:e.type})}),(0,t.jsx)(c.TableCell,{onClick:()=>A(e),children:e.contactCount.toLocaleString()}),(0,t.jsx)(c.TableCell,{onClick:()=>A(e),children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),(0,t.jsx)(c.TableCell,{onClick:()=>A(e),children:e.lastExported?new Date(e.lastExported).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Never"}),(0,t.jsx)(c.TableCell,{children:(0,t.jsxs)(B.DropdownMenu,{children:[(0,t.jsx)(B.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(k.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(B.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(B.DropdownMenuItem,{onClick:()=>A(e),children:"View details"}),(0,t.jsx)(B.DropdownMenuItem,{onClick:()=>{y({id:String(e.id),name:e.name,description:null,type:e.type.toUpperCase()}),w(!0)},children:"Rename / Edit"}),(0,t.jsxs)(B.DropdownMenuItem,{onClick:()=>v(e.id),children:[(0,t.jsx)(S.Download,{className:"mr-2 h-4 w-4"}),"Export CSV"]}),(0,t.jsx)(B.DropdownMenuItem,{onClick:()=>T(e.id),className:"text-red-600",children:"Delete list"})]})]})})]},e.id))})]})})}),(0,t.jsx)(F,{open:m,onClose:()=>g(!1),onSaved:()=>{g(!1),C()}}),(0,t.jsx)(F,{open:f,initialList:j,onClose:()=>{w(!1),y(null)},onSaved:()=>{w(!1),y(null),C()}})]})}function H(){let e=(0,a.useSearchParams)(),r=(0,a.useRouter)(),[i,n]=(0,s.useState)(e.get("tab")||"contacts");(0,s.useEffect)(()=>{let t=e.get("tab");t&&t!==i&&n(t)},[e]);let c=t=>{n(t);let s=new URLSearchParams(e.toString());s.set("tab",t),"lists"===t&&s.delete("listId"),r.push(`/contacts?${s.toString()}`)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Oswald:wght@500&display=swap",rel:"stylesheet"}),(0,t.jsx)(l.Card,{className:"mb-6 bg-white border border-gray-200 shadow-sm",children:(0,t.jsxs)("div",{className:"flex gap-1 p-2 border-b",children:[(0,t.jsx)("button",{onClick:()=>c("contacts"),className:`px-6 py-2.5 rounded-lg text-[15px] font-medium transition-all ${"contacts"===i?"bg-[#0A47B1] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,style:{fontFamily:"'Oswald', sans-serif",letterSpacing:"0.5px"},children:"Contacts"}),(0,t.jsx)("button",{onClick:()=>c("lists"),className:`px-6 py-2.5 rounded-lg text-[15px] font-medium transition-all ${"lists"===i?"bg-[#0A47B1] text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,style:{fontFamily:"'Oswald', sans-serif",letterSpacing:"0.5px"},children:"Lists"})]})}),"contacts"===i?(0,t.jsx)(T,{}):(0,t.jsx)(D,{})]})}e.s(["ContactsContent",()=>H],66514)}]);