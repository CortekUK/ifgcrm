(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74886,e=>{"use strict";let a=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>a],74886)},78894,e=>{"use strict";let a=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894)},12426,e=>{"use strict";let a=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>a],12426)},47627,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",e),...s})})}function r({className:e,...s}){return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",e),...s})}function l({className:e,...s}){return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",e),...s})}function i({className:e,...s}){return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...s})}function n({className:e,...s}){return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}function o({className:e,...s}){return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...s})}e.s(["Table",()=>s,"TableBody",()=>l,"TableCell",()=>o,"TableHead",()=>n,"TableHeader",()=>r,"TableRow",()=>i])},95468,e=>{"use strict";let a=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],95468)},78917,e=>{"use strict";let a=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>a],78917)},70065,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>n,"CardDescription",()=>i,"CardHeader",()=>r,"CardTitle",()=>l])},20682,e=>{"use strict";var a=e.i(71645);let t=0,s=new Map,r=e=>{if(s.has(e))return;let a=setTimeout(()=>{s.delete(e),n({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,a)},l=[],i={toasts:[]};function n(e){i=((e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}})(i,e),l.forEach(e=>{e(i)})}function o({...e}){let a=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>n({type:"DISMISS_TOAST",toastId:a});return n({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>n({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function c(){let[e,t]=a.useState(i);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>n({type:"DISMISS_TOAST",toastId:e})}}e.s(["useToast",()=>c])},27341,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(81140),r=e.i(30030),l=e.i(42727),i=e.i(96626),n=e.i(48425),o=e.i(86318),c=e.i(69340),d=e.i(10772),m="Tabs",[x,h]=(0,r.createContextScope)(m,[l.createRovingFocusGroupScope]),u=(0,l.createRovingFocusGroupScope)(),[g,b]=x(m),p=t.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,onValueChange:l,defaultValue:i,orientation:m="horizontal",dir:x,activationMode:h="automatic",...u}=e,b=(0,o.useDirection)(x),[p,v]=(0,c.useControllableState)({prop:r,onChange:l,defaultProp:i});return(0,a.jsx)(g,{scope:s,baseId:(0,d.useId)(),value:p,onValueChange:v,orientation:m,dir:b,activationMode:h,children:(0,a.jsx)(n.Primitive.div,{dir:b,"data-orientation":m,...u,ref:t})})});p.displayName=m;var v="TabsList",f=t.forwardRef((e,t)=>{let{__scopeTabs:s,loop:r=!0,...i}=e,o=b(v,s),c=u(s);return(0,a.jsx)(l.Root,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:r,children:(0,a.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});f.displayName=v;var y="TabsTrigger",j=t.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,disabled:o=!1,...c}=e,d=b(y,r),m=u(r),x=T(d.baseId,i),h=S(d.baseId,i),g=i===d.value;return(0,a.jsx)(l.Item,{asChild:!0,...m,focusable:!o,active:g,children:(0,a.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":h,"data-state":g?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:x,...c,ref:t,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(i)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(i)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==d.activationMode;g||o||!e||d.onValueChange(i)})})})});j.displayName=y;var N="TabsContent",w=t.forwardRef((e,s)=>{let{__scopeTabs:r,value:l,forceMount:o,children:c,...d}=e,m=b(N,r),x=T(m.baseId,l),h=S(m.baseId,l),u=l===m.value,g=t.useRef(u);return t.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(i.Presence,{present:o||u,children:({present:t})=>(0,a.jsx)(n.Primitive.div,{"data-state":u?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":x,hidden:!t,id:h,tabIndex:0,...d,ref:s,style:{...e.style,animationDuration:g.current?"0s":void 0},children:t&&c})})});function T(e,a){return`${e}-trigger-${a}`}function S(e,a){return`${e}-content-${a}`}w.displayName=N;var C=e.i(47163);function k({className:e,...t}){return(0,a.jsx)(p,{"data-slot":"tabs",className:(0,C.cn)("flex flex-col gap-2",e),...t})}function _({className:e,...t}){return(0,a.jsx)(f,{"data-slot":"tabs-list",className:(0,C.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function I({className:e,...t}){return(0,a.jsx)(j,{"data-slot":"tabs-trigger",className:(0,C.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function P({className:e,...t}){return(0,a.jsx)(w,{"data-slot":"tabs-content",className:(0,C.cn)("flex-1 outline-none",e),...t})}e.s(["Tabs",()=>k,"TabsContent",()=>P,"TabsList",()=>_,"TabsTrigger",()=>I],27341)},14764,e=>{"use strict";let a=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>a],14764)},69035,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(48425),r="horizontal",l=["horizontal","vertical"],i=t.forwardRef((e,t)=>{var i;let{decorative:n,orientation:o=r,...c}=e,d=(i=o,l.includes(i))?o:r;return(0,a.jsx)(s.Primitive.div,{"data-orientation":d,...n?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...c,ref:t})});i.displayName="Separator";var n=e.i(47163);function o({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return(0,a.jsx)(i,{"data-slot":"separator",decorative:s,orientation:t,className:(0,n.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}e.s(["Separator",()=>o],69035)},50257,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(67881),r=e.i(23750),l=e.i(62870),i=e.i(47627),n=e.i(94179),o=e.i(30374),c=e.i(69035),d=e.i(27341),m=e.i(20682),x=e.i(74886),h=e.i(78917),u=e.i(14764),g=e.i(95468),b=e.i(18566);function p({invoice:e,open:r,onOpenChange:l,onUpdate:i}){let[p,v]=(0,t.useState)(!1),[f,y]=(0,t.useState)(!1),[j,N]=(0,t.useState)([]),[w,T]=(0,t.useState)(!1),{toast:S}=(0,m.useToast)(),C=(0,b.useRouter)();(0,t.useEffect)(()=>{r&&k()},[r,e.id]);let k=async()=>{T(!0);try{let a=await fetch(`/api/invoices/${e.id}/payments`),t=await a.json();N(t.payments||[])}catch(e){console.error("Failed to fetch payments:",e)}finally{T(!1)}},_=async()=>{v(!0);try{if((await fetch(`/api/invoices/${e.id}/send-link`,{method:"POST"})).ok)S({title:"Payment link sent",description:`Payment link sent to ${e.player_name}`}),i();else throw Error("Failed to send payment link")}catch(e){S({variant:"destructive",title:"Error",description:"Failed to send payment link. Please try again."})}finally{v(!1)}},I=async()=>{y(!0);try{if((await fetch(`/api/invoices/${e.id}/mark-paid`,{method:"POST"})).ok)S({title:"Invoice marked as paid",description:`Invoice ${e.invoice_number} has been marked as paid`}),i(),l(!1);else throw Error("Failed to mark as paid")}catch(e){S({variant:"destructive",title:"Error",description:"Failed to mark invoice as paid. Please try again."})}finally{y(!1)}},P=(e,a)=>new Intl.NumberFormat("en-GB",{style:"currency",currency:a}).format(e),D=e=>new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),A=e=>{let t={paid:{className:"bg-green-500 text-white",label:"Paid"},sent:{className:"bg-blue-500 text-white",label:"Sent"},overdue:{className:"bg-red-500 text-white",label:"Overdue"},draft:{className:"bg-gray-400 text-white",label:"Draft"}},s=t[e]||t.draft;return(0,a.jsx)(n.Badge,{className:s.className,children:s.label})};return(0,a.jsx)(o.Dialog,{open:r,onOpenChange:l,children:(0,a.jsxs)(o.DialogContent,{className:"max-w-2xl max-h-[90vh] my-4 overflow-hidden p-0 flex flex-col",children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsxs)(o.DialogTitle,{className:"text-xl",children:["Invoice ",e.invoice_number]}),(0,a.jsxs)(o.DialogDescription,{className:"flex items-center gap-2",children:[e.player_name," â€¢ ",A(e.status)]})]}),(0,a.jsxs)(d.Tabs,{defaultValue:"details",className:"mt-6",children:[(0,a.jsxs)(d.TabsList,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(d.TabsTrigger,{value:"details",children:"Details"}),(0,a.jsx)(d.TabsTrigger,{value:"payments",children:"Payments"}),(0,a.jsx)(d.TabsTrigger,{value:"actions",children:"Actions"})]}),(0,a.jsxs)(d.TabsContent,{value:"details",className:"space-y-6 animate-fade-in",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-sm font-semibold text-gray-900",children:"Invoice Breakdown"}),(0,a.jsxs)("div",{className:"space-y-3 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Player"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.player_name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Programme"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.programme})]}),e.issue_date&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Issue Date"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:D(e.issue_date)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Due Date"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:D(e.due_date)})]}),(0,a.jsx)(c.Separator,{}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Total Amount"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:P(e.amount,e.currency)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Status"}),A(e.status)]})]})]}),"paid"!==e.status&&e.payment_url&&(0,a.jsx)("div",{children:(0,a.jsxs)(s.Button,{size:"lg",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 transition-all hover:from-blue-700 hover:to-blue-800",onClick:()=>window.open(e.payment_url,"_blank"),children:[(0,a.jsx)(h.ExternalLink,{className:"mr-2 h-4 w-4"}),"Pay Now"]})})]}),(0,a.jsx)(d.TabsContent,{value:"payments",className:"space-y-4 animate-fade-in",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"mb-3 text-sm font-semibold text-gray-900",children:"Payment Timeline"}),w?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 p-8 text-center text-sm text-gray-500",children:"Loading payments..."}):0===j.length?(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 p-8 text-center text-sm text-gray-500",children:"No payments recorded yet"}):(0,a.jsx)("div",{className:"space-y-3",children:j.map(t=>(0,a.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"rounded-full bg-green-100 p-2",children:(0,a.jsx)(g.CheckCircle2,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:P(t.amount,e.currency)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[t.method," â€¢ ",D(t.date)]})]})]}),(0,a.jsx)(n.Badge,{className:"bg-green-500 text-white",children:t.status})]})},t.id))})]})}),(0,a.jsxs)(d.TabsContent,{value:"actions",className:"space-y-4 animate-fade-in",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(s.Button,{onClick:_,disabled:p||"paid"===e.status,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 transition-all hover:from-blue-700 hover:to-blue-800",size:"lg",children:[(0,a.jsx)(u.Send,{className:"mr-2 h-4 w-4"}),p?"Sending...":"Send Payment Link"]}),"paid"!==e.status&&(0,a.jsxs)(s.Button,{variant:"outline",onClick:I,disabled:f,className:"w-full border-green-300 bg-transparent text-green-700 transition-all hover:bg-green-50",size:"lg",children:[(0,a.jsx)(g.CheckCircle2,{className:"mr-2 h-4 w-4"}),f?"Updating...":"Mark as Paid"]}),e.payment_url&&(0,a.jsxs)(s.Button,{variant:"outline",onClick:()=>{e.payment_url&&(navigator.clipboard.writeText(e.payment_url),S({title:"Copied",description:"Payment URL copied to clipboard"}))},className:"w-full bg-transparent transition-all",size:"lg",children:[(0,a.jsx)(x.Copy,{className:"mr-2 h-4 w-4"}),"Copy Payment Link"]}),(0,a.jsx)(c.Separator,{className:"my-4"}),(0,a.jsx)(s.Button,{variant:"ghost",className:"w-full",onClick:()=>{C.push("/players"),l(!1)},children:"View Player Profile"})]}),e.payment_url&&(0,a.jsxs)("div",{className:"mt-4 rounded-lg border border-gray-200 bg-gray-50 p-3",children:[(0,a.jsx)("div",{className:"mb-2 text-xs font-medium text-gray-600",children:"Payment URL"}),(0,a.jsx)("code",{className:"block truncate text-xs text-gray-700",children:e.payment_url})]})]})]})]})})}var v=e.i(73375),f=e.i(63059);function y(){let[e,o]=(0,t.useState)([]),[c,d]=(0,t.useState)([]),[m,x]=(0,t.useState)(!0),[h,u]=(0,t.useState)(null),[g,b]=(0,t.useState)(!1),[y,j]=(0,t.useState)("all"),[N,w]=(0,t.useState)("all"),[T,S]=(0,t.useState)(""),[C,k]=(0,t.useState)("this_month"),[_,I]=(0,t.useState)(1),[P,D]=(0,t.useState)(0),[A]=(0,t.useState)(25);(0,t.useEffect)(()=>{M()},[]),(0,t.useEffect)(()=>{E()},[y,N,T,C,_]);let M=async()=>{try{let e=await fetch("/api/settings/programmes"),a=await e.json();d(a.data||[])}catch(e){console.error("Failed to fetch programmes:",e)}},E=async()=>{x(!0);try{let e=new URLSearchParams({page:_.toString(),pageSize:A.toString()});"all"!==y&&e.append("status",y),"all"!==N&&e.append("programme",N),T&&e.append("search",T),"all"!==C&&e.append("dateRange",C);let a=await fetch(`/api/invoices?${e}`),t=await a.json();o(t.data||[]),D(t.total||0)}catch(e){console.error("Failed to fetch invoices:",e)}finally{x(!1)}},B=e=>{u(e),b(!0)},O=(e,a)=>new Intl.NumberFormat("en-GB",{style:"currency",currency:a}).format(e),R=e.filter(e=>"paid"!==e.status).reduce((e,a)=>e+a.amount,0),F=Math.ceil(P/A);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm",children:[(0,a.jsx)("div",{className:"border border-gray-200 bg-gray-50/50 p-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)(l.Select,{value:y,onValueChange:j,children:[(0,a.jsx)(l.SelectTrigger,{className:"h-11 w-[150px] bg-white transition-colors hover:border-blue-500",children:(0,a.jsx)(l.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(l.SelectContent,{children:[(0,a.jsx)(l.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(l.SelectItem,{value:"draft",children:"Draft"}),(0,a.jsx)(l.SelectItem,{value:"sent",children:"Sent"}),(0,a.jsx)(l.SelectItem,{value:"paid",children:"Paid"}),(0,a.jsx)(l.SelectItem,{value:"overdue",children:"Overdue"})]})]}),(0,a.jsxs)(l.Select,{value:N,onValueChange:w,children:[(0,a.jsx)(l.SelectTrigger,{className:"h-11 w-[180px] bg-white transition-colors hover:border-blue-500",children:(0,a.jsx)(l.SelectValue,{placeholder:"Programme"})}),(0,a.jsxs)(l.SelectContent,{children:[(0,a.jsx)(l.SelectItem,{value:"all",children:"All Programmes"}),c.map(e=>(0,a.jsx)(l.SelectItem,{value:e.name,children:e.name},e.id))]})]}),(0,a.jsxs)(l.Select,{value:C,onValueChange:k,children:[(0,a.jsx)(l.SelectTrigger,{className:"h-11 w-[160px] bg-white transition-colors hover:border-blue-500",children:(0,a.jsx)(l.SelectValue,{placeholder:"Date Range"})}),(0,a.jsxs)(l.SelectContent,{children:[(0,a.jsx)(l.SelectItem,{value:"all",children:"All Time"}),(0,a.jsx)(l.SelectItem,{value:"this_month",children:"This Month"}),(0,a.jsx)(l.SelectItem,{value:"last_month",children:"Last Month"}),(0,a.jsx)(l.SelectItem,{value:"this_quarter",children:"This Quarter"}),(0,a.jsx)(l.SelectItem,{value:"this_year",children:"This Year"})]})]}),(0,a.jsx)(r.Input,{type:"text",placeholder:"Search player name or email...",value:T,onChange:e=>S(e.target.value),className:"h-11 max-w-xs flex-1 bg-white transition-colors hover:border-blue-500"})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Invoice #"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Player"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Programme"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Stage"}),(0,a.jsx)(i.TableHead,{className:"text-right font-semibold text-gray-700",children:"Amount"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Status"}),(0,a.jsx)(i.TableHead,{className:"font-semibold text-gray-700",children:"Due Date"}),(0,a.jsx)(i.TableHead,{className:"text-right font-semibold text-gray-700",children:"Actions"})]})}),(0,a.jsx)(i.TableBody,{children:m?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:8,className:"h-32 text-center text-gray-500",children:"Loading invoices..."})}):0===e.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:8,className:"h-32 text-center text-gray-500",children:"No invoices found"})}):e.map((e,t)=>{var r;let l,o;return(0,a.jsxs)(i.TableRow,{className:`group cursor-pointer transition-all duration-200 ${"overdue"===e.status?"bg-[#fef2f2] hover:bg-red-50":t%2==0?"bg-white hover:bg-blue-50/50":"bg-[#f9fafb] hover:bg-blue-50/50"}`,onClick:()=>B(e),children:[(0,a.jsx)(i.TableCell,{className:"font-medium text-gray-900",children:e.invoice_number}),(0,a.jsx)(i.TableCell,{className:"text-gray-700",children:e.player_name}),(0,a.jsx)(i.TableCell,{className:"text-gray-700",children:e.programme}),(0,a.jsx)(i.TableCell,{className:"text-gray-700",children:(0,a.jsx)(n.Badge,{variant:"outline",className:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200",children:e.stage})}),(0,a.jsx)(i.TableCell,{className:"text-right font-bold text-gray-900",children:O(e.amount,e.currency)}),(0,a.jsx)(i.TableCell,{children:(r=e.status,o=(l={paid:{className:"bg-green-500 text-white hover:bg-green-600 transition-colors",label:"Paid"},sent:{className:"bg-blue-500 text-white hover:bg-blue-600 transition-colors",label:"Sent"},overdue:{className:"bg-red-500 text-white hover:bg-red-600 shadow-[0_0_8px_rgba(239,68,68,0.3)] transition-all",label:"Overdue"},draft:{className:"bg-gray-400 text-white hover:bg-gray-500 transition-colors",label:"Draft"}})[r]||l.draft,(0,a.jsx)(n.Badge,{className:o.className,children:o.label}))}),(0,a.jsx)(i.TableCell,{className:"text-gray-700",children:new Date(e.due_date).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsxs)(s.Button,{variant:"ghost",size:"sm",className:"text-blue-600 transition-all hover:bg-blue-50 hover:text-blue-700 hover:underline group-hover:gap-1",onClick:a=>{a.stopPropagation(),B(e)},children:[(0,a.jsx)("span",{className:"opacity-0 transition-opacity group-hover:opacity-100",children:"ðŸ‘ï¸"}),"View"]})})]},e.id)})})]})}),e.length>0&&(0,a.jsx)("div",{className:"border-t-2 border-gray-200 bg-gray-50 px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Total Outstanding"}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:O(R,e[0]?.currency||"GBP")})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",e.length>0?(_-1)*A+1:0," to ",Math.min(_*A,P)," of"," ",P," invoices"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>I(e=>Math.max(1,e-1)),disabled:1===_,children:[(0,a.jsx)(v.ChevronLeft,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",_," of ",F]}),(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>I(e=>Math.min(F,e+1)),disabled:_===F,children:["Next",(0,a.jsx)(f.ChevronRight,{className:"h-4 w-4"})]})]})]})]}),h&&(0,a.jsx)(p,{invoice:h,open:g,onOpenChange:b,onUpdate:()=>{E()}})]})}e.s(["InvoicesTable",()=>y],50257)},583,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(70065),r=e.i(12426),l=e.i(78894),i=e.i(95468);function n(){let[e,n]=(0,t.useState)(null),[o,c]=(0,t.useState)(!0);(0,t.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/invoices/summary"),a=await e.json();n(a)}catch(e){console.error("Failed to fetch summary:",e)}finally{c(!1)}};if(o)return(0,a.jsx)("div",{className:"mb-6 grid gap-4 md:grid-cols-3",children:[1,2,3].map(e=>(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium",children:"Loading..."})}),(0,a.jsx)(s.CardContent,{children:(0,a.jsx)("div",{className:"h-8 w-24 animate-pulse rounded bg-gray-200"})})]},e))});if(!e)return null;let m=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:e.currency}).format(a),x=new Date().toLocaleDateString("en-GB",{month:"long",year:"numeric"});return(0,a.jsxs)("div",{className:"mb-6 grid gap-4 animate-fade-in-up md:grid-cols-3",children:[(0,a.jsx)(s.Card,{className:"overflow-hidden border-blue-200 bg-[#eff6ff] shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:(0,a.jsx)(s.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:(0,a.jsx)(r.DollarSign,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Outstanding Balance"}),(0,a.jsx)("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:m(e.outstanding_balance)}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["as of ",x]})]})]})})}),(0,a.jsx)(s.Card,{className:"overflow-hidden border-red-200 bg-[#fef2f2] shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:(0,a.jsx)(s.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-red-100",children:(0,a.jsx)(l.AlertTriangle,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Overdue Invoices"}),(0,a.jsx)("div",{className:"mt-2 text-3xl font-bold text-red-600",children:e.overdue_count}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"require attention"})]})]})})}),(0,a.jsx)(s.Card,{className:"overflow-hidden border-green-200 bg-[#ecfdf5] shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:(0,a.jsx)(s.CardHeader,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-green-100",children:(0,a.jsx)(i.CheckCircle2,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(s.CardTitle,{className:"text-sm font-medium text-gray-600",children:"Paid This Month"}),(0,a.jsx)("div",{className:"mt-2 text-3xl font-bold text-green-600",children:m(e.paid_this_month)}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"successfully collected"})]})]})})})]})}e.s(["InvoicesSummary",()=>n])},38086,e=>{"use strict";var a=e.i(43476),t=e.i(70065);function s(){let e=[{month:"Jun",value:12e3},{month:"Jul",value:14e3},{month:"Aug",value:18e3},{month:"Sep",value:16e3},{month:"Oct",value:21e3},{month:"Nov",value:23500}],s=Math.max(...e.map(e=>e.value)),r=[{label:"Paid",value:68,color:"#2EB67D"},{label:"Sent",value:18,color:"#0A47B1"},{label:"Draft",value:8,color:"#9CA3AF"},{label:"Overdue",value:6,color:"#E03E3E"}],l=r.reduce((e,a)=>e+a.value,0),i=0;return(0,a.jsxs)(t.Card,{className:"bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"mb-1 text-lg font-semibold text-gray-900",children:"Payment Insights"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Overview of recent payments and overdue trends."})]}),(0,a.jsxs)("div",{className:"grid gap-8 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-4 text-sm font-medium text-gray-700",children:"Collections trend"}),(0,a.jsx)("div",{className:"flex items-end gap-3",style:{height:"160px"},children:e.map(e=>{let t=e.value/s*100;return(0,a.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-end",children:[(0,a.jsxs)("div",{className:"mb-2 text-xs font-medium text-gray-700",children:[(e.value/1e3).toFixed(0),"k"]}),(0,a.jsx)("div",{className:"w-full rounded-t-md bg-gradient-to-br from-[#0A47B1] to-[#1739C0] transition-all hover:opacity-80",style:{height:`${t}%`}}),(0,a.jsx)("div",{className:"mt-2 text-xs font-medium text-gray-600",children:e.month})]},e.month)})}),(0,a.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"Total collected per month (Â£)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"mb-4 text-sm font-medium text-gray-700",children:"Overdue breakdown"}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"relative mb-4",style:{width:"140px",height:"140px"},children:(0,a.jsxs)("svg",{width:"140",height:"140",viewBox:"0 0 140 140",children:[(0,a.jsx)("circle",{cx:"70",cy:"70",r:"60",fill:"#F3F4F6"}),r.map((e,t)=>{let s=e.value/l*100/100*360,r=i;i+=s;let n=(r-90)*Math.PI/180,o=(r+s-90)*Math.PI/180,c=70+60*Math.cos(n),d=70+60*Math.sin(n),m=70+60*Math.cos(o),x=70+60*Math.sin(o);return(0,a.jsx)("path",{d:`M 70 70 L ${c} ${d} A 60 60 0 ${+(s>180)} 1 ${m} ${x} Z`,fill:e.color,className:"transition-opacity hover:opacity-80"},e.label)}),(0,a.jsx)("circle",{cx:"70",cy:"70",r:"35",fill:"white"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2",children:r.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"text-xs text-gray-700",children:[e.label," (",e.value,"%)"]})]},e.label))})]})]})]})]})}e.s(["PaymentInsights",()=>s])}]);